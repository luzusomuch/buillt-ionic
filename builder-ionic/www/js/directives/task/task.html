<ion-content padding="false" class="has-header tasks-list-content">
  <div style="display:none"><a id="createTask" class="activator button button-stable button-block" ng-click="newTask()"><strong>New Task</strong></a></div>

  <div ng-show="addTask">
    <form style="padding:10px;" id="createTaskForm" name="form" class="col s12" ng-submit="save(form)">

      <div class="spacer" style="display: inline-block; width: 300px; height: 20px;"></div>

      <div class="item item-input">
        <!-- <span class="input-label">Description</span> -->
        <input placeholder="Task Description" id="task_description" type="text" ng-model="task.name" name="name" maxlength="80"
               ng-class="{'invalid' : form.name.$invalid && submitted}" ng-disabled="isShow">
        <p class="validate-message" ng-show="form.name.$error.required && submitted">Task name is required</p>
      </div>

      <div class="spacer" style="display: inline-block; width: 300px; height: 20px;"></div>

      <div class="item item-input">
        <!-- <span class="input-label">Due date</span> -->
        <input placeholder="Due Date" type="text" onblur="(this.type == 'text')"
         onfocus="(this.type == 'date')"
               name="created"
               id="dueDate"
               ng-model="task.dateEnd"
               format="mm/dd/yyyy"
               ng-disabled="isShow"
          />
      </div>

      <div class="spacer" style="display: inline-block; width: 300px; height: 20px;"></div>

      <div class="available-assign"  ng-if="!isShow" style="padding: 15px 0px;">
        <p style="font-size: 16px">Assignees:</p>
        <ul class="list">
          <li class="item item-checkbox" ng-repeat="staff in available track by $index">
            <div class="checkbox">
              <input type="checkbox" ng-click="assign(staff, $index)">
            </div>
            {{staff | name}}
          </li>
        </ul>
      </div>

      <div class="spacer" style="width: 300px; height: 44px;"></div>

      <div class="row" style="">
        <button class="button button-positive button-outline button-block" type="submit" ng-if="!isShow" name="action">Add Task
        </button>
      </div>
      <div class="row" style="display:none">
        <button class="button button-stable button-block cancel-task" type="button" ng-click="cancelTask()">Cancel</button>
      </div>
    </form>
  </div>
  <div class="list" ng-if="showListTask">
    <div ng-repeat="task in tasks | taskFilter : filter | orderBy : ['dateEnd'] ">
      <ion-item ui-sref="taskDetail({id: task.project, taskId: task._id})">
        <h2 ng-if="task.dueDateTomorrow || task.dueDateToday"><strong>{{task.name}}</strong></h2>
        <h2 ng-if="!task.dueDateTomorrow && !task.dueDateToday">{{task.name}}</h2>
        <p>
          <span ng-if="task.dueDateToday">Due Today</span>
          <span ng-if="task.dueDateTomorrow">Due Tomorrow</span>
          <span ng-if="!task.dueDateTomorrow && !task.dueDateToday">Due {{task.dateEnd | date: longDate}}</span>
        </p>
      </ion-item>
      <!-- <ion-item class="item-stable" ng-click="toggleTask(task)" ng-class="{active: isTaskShown(task)}">{{task.name}}</ion-item>

      <ion-item class="item-accordion" ng-show="isTaskShown(task)">
        <ul>
          <li>Task name:{{task.name}}</li>
          <li>Due date: {{task.dateEnd | date: 'MM/dd/yyyy'}}</li>
          <li>Assignees:
            <ul style="margin-left: 20px;">
              <li ng-repeat="assignee in task.assignees" ng-if="assignee.firstName">{{assignee.firstName}} {{assignee.lastName}}</li>
              <li ng-repeat="assignee in task.assignees" ng-if="!assignee.firstName">{{assignee.email}} </li>
            </ul>
          </li>
        </ul>
      </ion-item> -->
    </div>
  </div>             
</ion-content>