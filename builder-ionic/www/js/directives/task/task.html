<!-- <div class="">
  <ul class="card collection"> -->
    <!-- <div class="card-header">
      <div class="row">
        <div ng-if="deviceWidth <= 600" class="col s10 task-filter" style="padding-top: 15px">
          <a class="btn-flat" style="font-size: 12px" ng-click="filter = 'all'" ng-class="{'active' : filter == 'all'}">All Tasks</a> <br>
          <a class="btn-flat" style="font-size: 12px" ng-click="filter = {'myTask' : currentUser._id}" ng-class="{'active' : filter.myTask == currentUser._id}">My Tasks</a> <br>
          <a class="btn-flat" style="font-size: 12px" ng-click="filter = 'completed'"  ng-class="{'active' : filter == 'completed'}">Completed Tasks</a>
        </div>
        <div ng-if="deviceWidth > 600" class="col s10 task-filter" style="padding-top: 15px">
          <a class="btn-flat" style="font-size: 12px" ng-click="filter = 'all'" ng-class="{'active' : filter == 'all'}">All Tasks</a>
          <a class="btn-flat" style="font-size: 12px" ng-click="filter = {'myTask' : currentUser._id}" ng-class="{'active' : filter.myTask == currentUser._id}">My Tasks</a>
          <a class="btn-flat" style="font-size: 12px" ng-click="filter = 'completed'"  ng-class="{'active' : filter == 'completed'}">Completed Tasks</a>
        </div>
        <div class="col s2">
          
        </div>
      </div>
    </div>
    <div class="divider"></div> -->
    <!-- <div class="card-header">
      <a class="dropdown-button btn-flat btn-flat right activator" style="margin-top: 15px" ng-click="newTask()">
        <i class="mdi-content-add"></i>
      </a>
    </div>
    <div style="height:300px; overflow-y: auto">
      <li class="collection-item row" ng-repeat="task in tasks | taskFilter : filter | orderBy : ['dateEnd'] ">
        <div>
          <a class="btn-flat col s1"
             ng-click="(!task.isOwner && !isLeader) || complete(task)"
             ng-class="{ 'disabled' : !task.isOwner && !isLeader}">
            <i ng-if="!task.completed" class="mdi-toggle-check-box-outline-blank"></i>
            <i ng-if="task.completed" class="mdi-toggle-check-box"></i>
          </a>
            <span class="col s10" ng-class="{'completed' : task.completed, 'disabled' : !task.isOwner && !isLeader}"><a class="activator" ng-click="showTask(task)">{{task.name}}</a></span>
          <a class="btn-flat activator secondary-content col s1" style="margin-top: -3px; font-size: 12px;"
             ng-click="(!task.isOwner && !isLeader && !task.completed) || editTask(task)"
             ng-if="task.isOwner || isLeader && !task.completed ">
          Edit
          </a>
        </div>
      </li>
    </div>

    <div class="card-reveal"> -->
      <!--<span class="card-title grey-text text-darken-4"><i class="mdi-navigation-close right"></i></span>-->
      <!-- <form name="form" class="col s12" ng-submit="save(form)">
        <div class="row">
          <div class="input-field col s12">
            <input id="task_description" type="text" ng-model="task.name" name="name" maxlength="80"
                   ng-class="{'invalid' : form.name.$invalid && submitted}" ng-disabled="isShow">
            <label for="task_description">Task</label>
            <p class="validate-message" ng-show="form.name.$error.required && submitted">Task name is required</p>
          </div>
          <div class="input-field col s12">
            <input type="text"
                   name="created"
                   id="dueDate"
                   ng-model="task.dateEnd"
                   format="mm/dd/yyyy"
                   ng-disabled="isShow"
                   datepicker
              />
            <label for="dueDate" class="active">Due date</label>
          </div>
        </div>

        <div class="row current-assign">
          <p style="">Current Assignee's:</p>
          <div class="card col"  ng-if="!isShow"  style="padding: 5px; margin-left: 10px" ng-repeat="assignee in task.assignees" ng-class="{'admin' : assignee.team.role == 'admin'}">
            {{assignee | name}} <span ng-if="assignee.canRevoke"><a ng-click="revoke(assignee,$index)"><i class="mdi-navigation-cancel" style="margin-left: 5px"></i></a></span>
          </div>
          <div class="card col"  ng-if="isShow"  style="padding: 5px; margin-left: 10px" ng-repeat="assignee in task.assignees" ng-class="{'admin' : assignee.team.role == 'admin'}">
            {{assignee | name}}
          </div>
        </div>

        <div class="divider"></div>

        <div class="row available-assign"  ng-if="!isShow" >
          <p style="">Available Assignee's:</p>
          <a ng-click="assign(staff,$index)" ng-repeat="staff in available track by $index">
            <div class="card col" style="padding: 5px; margin-left: 10px"  ng-class="{'admin' : staff.team.role == 'admin'}">
              {{staff | name}}
            </div>
          </a>
        </div>

        <div class="row">
          <button class="btn right" type="submit" ng-if="!isShow" name="action">Save
          </button>
          <button class="card-title grey-text text-darken-4 btn-flat right" type="button" style="font-size: 15px;margin-right: 10px">Cancel</button>
        </div>
      </form>
    </div>
  </ul>

</div> -->

<ion-content padding="false" class="has-header">
  <div><a class="activator button button-stable button-block" ng-click="newTask()"><strong>New Task</strong></a></div>
  <div ng-show="addTask">
    <form name="form" class="col s12" ng-submit="save(form)">
      <div class="item item-input">
        <span class="input-label">Task</span>
        <input id="task_description" type="text" ng-model="task.name" name="name" maxlength="80"
               ng-class="{'invalid' : form.name.$invalid && submitted}" ng-disabled="isShow">
        <p class="validate-message" ng-show="form.name.$error.required && submitted">Task name is required</p>
      </div>
      <div class="item item-input">
        <span class="input-label">Due date</span>
        <input type="date"
               name="created"
               id="dueDate"
               ng-model="task.dateEnd"
               format="mm/dd/yyyy"
               ng-disabled="isShow"
          />
      </div>

      <div class="row current-assign">
        <p style="">Current Assignee's:</p>
        <div class="card col"  ng-if="!isShow"  style="padding: 5px; margin-left: 10px" ng-repeat="assignee in task.assignees" ng-class="{'admin' : assignee.team.role == 'admin'}">
          {{assignee | name}} <span ng-if="assignee.canRevoke"><a ng-click="revoke(assignee,$index)"><i class="mdi-navigation-cancel" style="margin-left: 5px"></i></a></span>
        </div>
        <div class="card col"  ng-if="isShow"  style="padding: 5px; margin-left: 10px" ng-repeat="assignee in task.assignees" ng-class="{'admin' : assignee.team.role == 'admin'}">
          {{assignee | name}}
        </div>
      </div>

      <div class="divider"></div>

      <div class="row available-assign"  ng-if="!isShow" >
        <p style="">Available Assignee's:</p>
        <a ng-click="assign(staff,$index)" ng-repeat="staff in available track by $index">
          <div class="card col" style="padding: 5px; margin-left: 10px"  ng-class="{'admin' : staff.team.role == 'admin'}">
            {{staff | name}}
          </div>
        </a>
      </div>

      <div class="row">
        <button class="button button-stable button-block" type="submit" ng-if="!isShow" name="action">Save
        </button>
        <button class="card-title button button-stable button-block" type="button" style="font-size: 15px;margin-right: 10px" ng-click="cancelTask()">Cancel</button>
      </div>
    </form>
  </div>
  <ion-list>
    <div ng-repeat="task in tasks | taskFilter : filter | orderBy : ['dateEnd'] ">
      <ion-item class="item-stable" ng-click="toggleTask(task)" ng-class="{active: isTaskShown(task)}">{{task.name}}</ion-item>

      <ion-item class="item-accordion" ng-show="isTaskShown(task)">
        <ul>
          <li>Task name:{{task.name}}</li>
          <li>Due date: {{task.dateEnd | date: 'MM/dd/yyyy'}}</li>
          <li>Assignees:
            <ul style="margin-left: 20px;">
              <li ng-repeat="assignee in task.assignees" ng-if="assignee.firstName">{{assignee.firstName}} {{assignee.lastName}}</li>
              <li ng-repeat="assignee in task.assignees" ng-if="!assignee.firstName">{{assignee.email}} </li>
            </ul>
          </li>
        </ul>
      </ion-item>
    </div>
  </ion-list>             
</ion-content>
       
