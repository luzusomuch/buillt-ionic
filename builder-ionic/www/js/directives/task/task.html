<ion-content padding="false" class="has-header">
  <div style="display:none"><a id="createTask" class="activator button button-stable button-block" ng-click="newTask()"><strong>New Task</strong></a></div>
  <div ng-show="addTask">
    <form name="form" class="col s12" ng-submit="save(form)">
      <div class="item item-input">
        <span class="input-label">Task</span>
        <input id="task_description" type="text" ng-model="task.name" name="name" maxlength="80"
               ng-class="{'invalid' : form.name.$invalid && submitted}" ng-disabled="isShow">
        <p class="validate-message" ng-show="form.name.$error.required && submitted">Task name is required</p>
      </div>
      <div class="item item-input">
        <span class="input-label">Description</span>
        <input id="task_description" type="text" ng-model="task.description" name="description" maxlength="80"
               ng-class="{'invalid' : form.description.$invalid && submitted}" ng-disabled="isShow">
        <p class="validate-message" ng-show="form.description.$error.required && submitted">Task description is required</p>
      </div>
      <div class="item item-input">
        <span class="input-label">Due date</span>
        <input type="date"
               name="created"
               id="dueDate"
               ng-model="task.dateEnd"
               format="mm/dd/yyyy"
               ng-disabled="isShow"
          />
      </div>

      <div class="current-assign">
        <p style="">Current Assignee's:</p>
        <div class="card col"  ng-if="!isShow"  style="padding: 5px; margin-left: 10px" ng-repeat="assignee in task.assignees" ng-class="{'admin' : assignee.team.role == 'admin'}">
          <span ng-if="assignee.canRevoke"><a ng-click="revoke(assignee,$index)"><i class="icon ion-close-round" style="margin-left: 5px"></i></a></span>  {{assignee | name}} 
        </div>
        <div class="card col"  ng-if="isShow"  style="padding: 5px; margin-left: 10px" ng-repeat="assignee in task.assignees" ng-class="{'admin' : assignee.team.role == 'admin'}">
          {{assignee | name}}
        </div>
      </div>

      <div class="divider"></div>

      <div class="available-assign"  ng-if="!isShow" >
        <p style="">Available Assignee's:</p>
        <a ng-click="assign(staff,$index)" ng-repeat="staff in available track by $index">
          <div class="card col" style="padding: 5px; margin-left: 10px"  ng-class="{'admin' : staff.team.role == 'admin'}">
            {{staff | name}}
          </div>
        </a>
      </div>

      <div class="row">
        <button class="button button-stable button-block" type="submit" ng-if="!isShow" name="action">Save
        </button>
      </div>
      <div class="row" style="display:none">
        <button class="button button-stable button-block cancel-task" type="button" ng-click="cancelTask()">Cancel</button>
      </div>
    </form>
  </div>
  <div class="list" ng-if="showListTask">
    <div ng-repeat="task in tasks | taskFilter : filter | orderBy : ['dateEnd'] ">
      <ion-item ui-sref="taskDetail({id: task.project, taskId: task._id})">
        {{task.name}}
        </ion-item>
      <!-- <ion-item class="item-stable" ng-click="toggleTask(task)" ng-class="{active: isTaskShown(task)}">{{task.name}}</ion-item>

      <ion-item class="item-accordion" ng-show="isTaskShown(task)">
        <ul>
          <li>Task name:{{task.name}}</li>
          <li>Due date: {{task.dateEnd | date: 'MM/dd/yyyy'}}</li>
          <li>Assignees:
            <ul style="margin-left: 20px;">
              <li ng-repeat="assignee in task.assignees" ng-if="assignee.firstName">{{assignee.firstName}} {{assignee.lastName}}</li>
              <li ng-repeat="assignee in task.assignees" ng-if="!assignee.firstName">{{assignee.email}} </li>
            </ul>
          </li>
        </ul>
      </ion-item> -->
    </div>
  </div>             
</ion-content>