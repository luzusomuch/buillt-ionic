<!-- <ul class="card collection">
  <div class="card-header">
    <div class="row">
      <div class="col s10">
        <div class="col s12">
          <a class="dropdown-button btn-flat ng-isolate-scope" data-gutter="5" style="margin-top: 15px" data-activates="threadSelector" dropdown="" data-beloworigin="true"><span class="ng-scope">
            {{(currentThread) ? currentThread.name : 'no Thread' | elipsis : 20}}
            </span><i class="mdi-navigation-arrow-drop-down ng-scope"></i>
          </a>
            <ul id="threadSelector" style="margin-top: 15px" class="dropdown-content">
              <li ng-repeat="thread in threads" >
                <a ng-if="thread.canSee" ng-click="selectThread(thread)">{{thread.name}}</a>
              </li>
          </ul>
        </div>
        <div class="col s12" ng-if="currentThread.users">
          <p style="margin-top: 15px">{{currentThread.users | threadUsers}}</p>
        </div>
      </div>
      <div class="col s2">
        <a class="dropdown-button btn-flat btn-flat right ng-isolate-scope" style="margin-top:15px" data-gutter="-30" data-activates="chatActions" dropdown="" data-beloworigin="true" data-constrainwidth="false">
          <i class="mdi-navigation-more-vert ng-scope"></i>
        </a><ul id="chatActions" class="dropdown-content" style="margin-top:15px">
        <li><a class="activator" ng-click="newThread()">New Thread</a></li>
        <li><a class="activator" ng-click="editThread(currentThread)" ng-if="currentThread">Edit Thread</a></li>
      </ul>


      </div>
    </div>
  </div>
  <div class="divider"></div>
  <div id="messages" style="height: 500px; overflow-y: auto"  scroll-to-bottom="currentThread.messages">

    <li class="collection-item" ng-repeat="message in currentThread.messages">
      <div class="row valign-wrapper" style="margin-bottom: -5px">
        <p class="col s9 valign" ng-bind-html="message.text | linkify"></p>
        <div class="card col" style="padding: 5px; margin-left: 10px">
          {{message.user | name}}
        </div>
      </div>
    </li>
    <div ng-if="currentThread" id="bottom111"></div>
  </div>
  <div class="divider"></div>
  <div class="col s12 card-footer" style="height: 150px" ng-show="currentThread">
    <div class="row">
      <form class="col s10 offset-s1 ng-pristine ng-valid" name="messageForm" novalidate ng-submit="sendMessage()">
        <div class="input-field col s9">
          <textarea name="text" id="textarea1" class="materialize-textarea" ng-model="message.text"
                    ng-keydown="enterMessage($event);">
          </textarea>
          <label for="textarea1">Send a Message...</label>
        </div>
        <div class="input-field col s3">
          <button class="btn-large waves-effect waves-yellow" type="submit" style="margin-top: 47px" name="action">Send
            <i class="mdi-content-send right"></i>
          </button>
        </div>
      </form>
    </div>
  </div>
  <div class="card-reveal">
    <span ng-click="close()" class="card-title grey-text text-darken-4" ng-if="isNew">New Thread<i class="mdi-navigation-close right"></i></span>
    <span ng-click="close()" class="card-title grey-text text-darken-4" ng-if="!isNew">Edit Thread<i class="mdi-navigation-close right"></i></span>
    <form class="col s12" name="form" novalidate ng-submit="saveThread(form)">
      <div class="input-field col s12">
        <input id="thread_name" type="text" ng-model="thread.name" required name="name" ng-class="{'invalid' : form.name.$invalid && submitted}">
        <label for="thread_name">Name</label>
        <p class="validate-message" ng-show="form.name.$error.required && submitted">Thread name is required</p>
      </div>
      <div class="row current-assign">
        <div class="card col" style="padding: 5px; margin-left: 10px" ng-repeat="user in thread.users" ng-class="{'admin' : user.team.role == 'admin'}">
          {{user | name}} <span><a ng-click="revoke(user,$index)"><i class="mdi-navigation-cancel" style="margin-left: 5px"></i></a></span>
        </div>
      </div>

      <div class="divider"></div>

      <div class="row available-assign">
        <p style="">Available user:</p>
        <a ng-click="assign(user,$index)" ng-repeat="user in available track by $index" >
          <div class="card col" style="padding: 5px; margin-left: 10px" ng-class="{'admin' : user.team.role == 'admin'}">
            {{user | name}}
          </div>
        </a>
      </div>
      <div class="row">
        <button class="btn right waves-effect waves-yellow" type="submit" name="action">Save
        </button>
      </div>
    </form>
  </div>
</ul>
 -->

  
  <ion-content padding="false" class="has-header">
    <div><a class="activator" ng-click="newThread()">New Thread</a></div>
    <div ng-show="addThread">
      <span ng-click="close()" class="card-title grey-text text-darken-4" ng-if="isNew">New Thread<i class="material icons">remove</i></span>
      <span ng-click="close()" class="card-title grey-text text-darken-4" ng-if="!isNew">Edit Thread<i class="material icons">remove</i></span>
      <form class="col s12" name="form" novalidate ng-submit="saveThread(form)">
        <ion-list>
          <label class="item item-input">
            <span class="input-label">Name</span>
            <input id="thread_name" type="text" ng-model="thread.name" required name="name" ng-class="{'invalid' : form.name.$invalid && submitted}">
            <p class="validate-message" ng-show="form.name.$error.required && submitted">Thread name is required</p>
          </label>
          <label class="item item-input current-assign">
            <div class="card col" style="padding: 5px; margin-left: 10px" ng-repeat="user in thread.users" ng-class="{'admin' : user.team.role == 'admin'}">
              {{user | name}} 
              <span><a ng-click="revoke(user,$index)"><i class="mdi-navigation-cancel" style="margin-left: 5px"></i></a></span>
            </div>
            <input id="thread_name" type="text" ng-model="thread.name" required name="name" ng-class="{'invalid' : form.name.$invalid && submitted}">
            <p class="validate-message" ng-show="form.name.$error.required && submitted">Thread name is required</p>
          </label>
          <label class="available-assign">
            <p style="">Available user:</p>
            <a ng-click="assign(user,$index)" ng-repeat="user in available track by $index" >
              <div style="padding: 5px; margin-left: 10px" ng-class="{'admin' : user.team.role == 'admin'}">
                {{user | name}}
              </div>
            </a>
          </label>
          <label>
            <button class="button button-stable button-block" type="submit">Save</button>
          </label>
        </ion-list>
      </form>
    </div>
    <ion-list>
      <ion-item ng-repeat="thread in threads">{{thread.name}}</ion-item>
      <ion-item class="item-accordion" ng-repeat="item in group.items" ng-show="isGroupShown(group)">
            {{item}}
          </ion-item>
      <ion-item ng-click="toggleGroup(thread)" ng-class="{active: isGroupShown(thread)}">Thread 2</ion-item>
      <ion-item>Thread 3</ion-item>
    </ion-list>             
  </ion-content>
