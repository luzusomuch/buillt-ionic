  <ion-content padding="false" class="has-header messages-list-content">

    <div style="display:none"><a id="createThread" class="activator button button-stable button-block" ng-click="newThread()"><strong>New Thread</strong></a></div>
    <div ng-show="addThread">
      <span style="display:none" ng-click="close()" class="close-thread card-title button button-stable button-block" ng-if="isNew">New Thread<i style="float:right;" class="icon ion-close-round"></i></span>

      <form style="padding:10px;" id="createThreadForm" name="form" novalidate ng-submit="saveThread(form)">

        <div class="spacer" style="display: inline-block; width: 300px; height: 20px;"></div>

        <div class="item item-input">
          <!-- <span class="input-label">Name</span> -->
          <input placeholder="Message Name" id="thread_name" type="text" ng-model="thread.name" required name="name" ng-class="{'invalid' : form.name.$invalid && submitted}">
          <p class="validate-message" ng-show="form.name.$error.required && submitted">Thread name is required</p>
        </div>

        <div class="spacer" style="display: inline-block; width: 300px; height: 20px;"></div>

        <div class="available-assign" >
          <p style="">Recipients:</p>
          <ul class="list">
            <li class="item item-checkbox" ng-repeat="user in available track by $index">
              <div class="checkbox">
                <input type="checkbox" ng-click="assign(user, $index)">
              </div>
              {{user | name}}
            </li>
          </ul>
        </div>
        <div class="row" style="">
          <button class="button button-positive button-outline button-block" type="submit">Add message</button>
        </div>
      </form>
    </div>
    <div class="list" ng-if="showMessageList">
      <div ng-repeat="thread in threads">
        <ion-item ng-click="goToThreadDetail(thread)" ui-sref="threadDetail({id: thread.project, threadId: thread._id})">
          <h2 ng-if="thread.isNewNotification"><strong>{{thread.name}}</strong></h2>
          <h2 ng-if="!thread.isNewNotification">{{thread.name}}</h2>
          <p ng-repeat="message in thread.messages" ng-if="$last">
            <span ng-if="thread.isNewNotification"><strong>{{message.user.firstName + ' ' + message.user.lastName+': '+ message.text}}</strong></span>
            <span ng-if="!thread.isNewNotification">{{message.user.firstName + ' ' + message.user.lastName+': '+ message.text}}</span>
          </p>
        </ion-item>
      </div>
    </div>             
  </ion-content>
