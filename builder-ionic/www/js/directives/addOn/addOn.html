<div class="col s12">
  <ul class="card collection">
   <div class="card-header">
     <div class="row">
       <div class="col s9">
         <a class='dropdown-button btn-flat' style="margin-top: 15px" data-gutter="15" data-activates='itemFilter' dropdown data-beloworigin="true">{{(allItemsText) ? allItemsText : 'All items'}}<i class="mdi-navigation-arrow-drop-down"></i></a>
         <ul id='itemFilter' class='dropdown-content' style="margin-top: 15px">
          <li ng-show="type != 'variation'" ng-hide="type == 'staffPackage'">
            <a ng-click="showVariations(); hideAll = true; showVariation = true; showDocument = false; showDefect = false; showDocument = false; showInvoice = false;">VARIATIONS</a>
          </li>
          <li ng-show="type != 'staffPackage'">
            <a ng-click="showInvoices(); hideAll = true; showInvoice = true; showDefect = false; showVariation = false; showDocument = false;">INVOICES</a>
          </li>
          <li>
            <a ng-click="showDefects(); hideAll = true; showDefect = true; showDocument = false; showVariation = false; showInvoice = false;">DEFECTS</a>
          </li>
          <li>
            <a ng-click="showDocuments(); hideAll = true; showDocument = true; showVariation = false; showDefect = false; showInvoice = false;">DOCUMENTS</a>
          </li>
        </ul>
      </div>
      <div class="col s3">
       <a class='dropdown-button btn-flat btn-flat right' style="margin-top: 15px;" data-gutter="-30" data-activates='relatedActions' dropdown data-beloworigin="true" data-constrainwidth="false">
         <i class="mdi-navigation-more-vert"></i>
       </a>
       <ul id='relatedActions' class='dropdown-content' style="margin-top: 15px" ng-if="type == 'BuilderPackage'">
         <li ng-if="currentTeam.type == 'builder'"><a class="modal-trigger" href="#attachInvoice">Attach Invoice</a></li>
         <li ng-if="currentTeam.type == 'homeOwner'"><a class="modal-trigger" href="#modal_attachDefect">Attach Defect</a></li>
         <li>
          <a class="modal-trigger" href="#attachVariationWithQuote" ng-show="currentTeam.type == 'builder'">Attach Variation</a>
          <a class="modal-trigger" href="#modal_attachVariation" ng-show="currentTeam.type == 'homeOwner'">Attach Variation</a>
        </li>
         <li><a class="modal-trigger" href="#modal_attachDocument">Attach Document</a></li>
       </ul>

       <ul id='relatedActions' class='dropdown-content' style="margin-top: 15px" ng-if="type == 'contractor' || type == 'material' || type == 'variation' || type == 'staffPackage'">
         <li ng-if="type == 'contractor' || type == 'material'">
          <a ng-show="currentTeam.type == 'builder'" class="modal-trigger" href="#modal_attachVariation">Attach Variation</a>
          <a ng-show="currentTeam.type == 'contractor' || currentTeam.type == 'supplier'" class="modal-trigger" href="#attachVariationWithQuote">Attach Variation</a>
        </li>
        <li ng-if="currentTeam.type == 'builder'" ng-hide="package.packageType == 'BuilderPackage'">
          <a class="modal-trigger" href="#modal_attachDefect">Attach Defect</a>
        </li>
        <li ng-show="package.packageType == 'BuilderPackage'" ng-if="currentTeam.type == 'builder'">
          <a class="modal-trigger" href="#attachInvoice">Attach Invoice</a>
        </li>

        <li ng-show="package.packageType == 'BuilderPackage'">
          <a ng-if="currentTeam.type == 'homeOwner'" class="modal-trigger" href="#modal_attachDefect">Attach Defect</a>
        </li>

        <li>
          <a class="modal-trigger" href="#modal_attachDocument">Attach Document</a>
        </li>
        <li ng-if="currentTeam.type == 'contractor' || currentTeam.type == 'supplier' || isStaff == true">
          <a class="modal-trigger" href="#attachInvoice">Attach Invoice</a>
        </li>
      </ul>
    </div>
  </div>
</div>


<div class="divider"></div>
<div class="scrollbar-dynamic" style="height: 300px;" ng-hide="hideAll">
  <li class="collection-item" ng-repeat="item in package.variations | filter:{isCancel: false} track by $index" ng-if="package.variations">
    <a ng-if="item.isCompleted" ng-click="goToVariation(item)">Variation - {{item.name}} - Completed</a>
    <a ng-if="!item.isCompleted" ng-click="goToVariation(item)">Variation - {{item.name}}</a>
  </li>
  <li class="collection-item" ng-repeat="item in package.defects" ng-if="package.defects">
    <a class="modal-trigger" href="#modal-defect-{{item._id}}">Defect - {{item.title}}</a>
  </li>
  <li class="collection-item" ng-repeat="item in package.invoices" ng-if="package.invoices">
    <a class="modal-trigger" href="#modal-invoice-{{item._id}}">Invoices - {{item.title}}</a>
  </li>
  <li class="collection-item" ng-repeat="file in documents | unique: title" ng-if="documents">
    <a class="modal-trigger" href="#modal-file-{{file._id}}">Document - {{file.title}}</a></li>
  </div>


  <div class="scrollbar-dynamic" style="height: 300px" ng-show="showVariation" ng-if="package">
   <li class="collection-item" ng-repeat="variation in package.variations | filter:{isCompleted:false, isCancel: false} track by $index">
    <a <a ng-click="goToVariation(variation)">{{variation.name}}</a></li>
  </div>
  <div class="scrollbar-dynamic" style="height: 300px" ng-show="showDefect" ng-if="data">
   <li class="collection-item" ng-repeat="defect in data.defects">
    <a class="modal-trigger" href="#modal-defect-{{defect._id}}">{{defect.title}}</a></li>
  </div>
  <div class="scrollbar-dynamic" style="height: 300px" ng-show="showInvoice" ng-if="data">
   <li class="collection-item" ng-repeat="invoice in data.invoices">
    <a class="modal-trigger" href="#modal-invoice-{{invoice._id}}">{{invoice.title}} - Total {{invoice.total}}</a></li>
  </div>
  <div class="scrollbar-dynamic" style="height: 300px" ng-show="showDocument" ng-if="documents">
    <li class="collection-item" ng-repeat="file in documents | unique: title">
      <a class="modal-trigger" href="#modal-file-{{file._id}}">{{file.title}}</a></li>
    </div>
  </ul>
</div> 

<div id="modal_attachDocument" class="modal">
  <div class="modal-content">
    <upload package="package"></upload>
  </div>
</div>

<div id="modal_attachDefect" class="modal modal-fixed-footer">
  <form method="POST" ng-submit="sendDefect()" >
    <div class="modal-content">
      <div class="row">
        <div class="col s12">
          <h5>New Defect for {{package.name}}</h5>
        </div>
      </div>
      <div class="row valign-wrapper">
        <div class="input-field col s6">
          <input id="defect_title" type="text" class="validate valign" ng-model="defect.title">
          <label for="defect_title">Defect Title</label>
        </div>
        <div class="input-field col s6">
          <input id="defect_location" type="text" class="validate valign" ng-model="defect.location">
          <label for="defect_location">Location of the Defect</label>
        </div>
      </div>
      <div class="row">
        <div class="input-field col s12">
          <textarea id="defect_description" class="materialize-textarea" ng-model="defect.description"></textarea>
          <label for="defect_description">Description of Defect</label>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="modal-action modal-close waves-effect waves-green btn-flat ">Send Defect!</button>
      <button type="button" class="modal-action modal-close waves-effect waves-green btn-flat ">Cancel</button>
    </div>
  </form>
</div>

<div id="attachInvoice" class="modal modal-fixed-footer">
  <form method="POST" ng-submit="sendInvoice()" name="sendInvoiceForm">
    <div class="modal-content">

     <div class="row">
       <div class="col s12">
         <h5>New Invoice for {{package.name}}</h5>
       </div>
     </div>
     <div class="row">
       <div class="input-field col s12">
         <input id="project_name" type="text" class="validate" ng-model="invoice.title" required>
         <label for="project_name">Invoice Title</label>
       </div>
     </div>
     <div class="row">
       <div class="col s12">
        <ul class="collection z-depth-1">
          <li class="collection-item vlalign-wrapper">
            <div class="row" style="margin-bottom: 0px">
              <div class="col s6 valign center-align background-hover">
                <a ng-click="addLineWithRate()" class="waves-effect waves-light" style="color:#000;">Add Line with Rate</a>
              </div>
              <div class="col s6 valign center-align background-hover">
                <a ng-click="addLineWithPrice()" class="waves-effect waves-light" style="color:#000;">Add Line with Price</a>
              </div>
            </div>
          </li>
          <li class="">
              <div class="row form" style="margin-bottom: 0px; padding:10px;background-color: #FFF" ng-repeat="lineWithRate in lineWithRates track by $index">
                <div class="input-field col s12 m6">
                   <textarea value="This is a line item with Rate - note the field for qty is editable"id="description" class="materialize-textarea" ng-model="rate.lineWithRate.rateDescription[$index]" required></textarea>
                       <label for="description">Description of Item</label>
                    </div>
                <div class="input-field col s12 m2" style="margin-top: 67px">
                        <input id="rate" name="rate" type="text" class="validate" ng-model="rate.lineWithRate.rate[$index]" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" required>
                        <label for="rate">Rate</label>
                        <p class="validate-message" ng-show="sendInvoiceForm.rate.$invalid && sendInvoiceForm.rate.$dirty">Limit 2 decimals!!!</p>
                    </div>
                <div class="input-field col s12 m1" style="margin-top: 67px">
                        <input id="quantity" type="text" class="validate" ng-model="rate.lineWithRate.rateQuantity[$index]" required>
                        <label for="quantity">Qty</label>
                    </div>
                    <span style="display:none">{{rate.lineWithRate.rateTotal[$index] = (rate.lineWithRate.rate[$index] * rate.lineWithRate.rateQuantity[$index]).toFixed(2)}}</span>
                <div class="input-field col s6 m2" style="margin-top: 67px" ng-hide="rate.lineWithRate.rateTotal[$index] != 'NaN'">
                  <input type="text" disabled id="rateTotal">
                  <label for="rateTotal">Line total</label>
                </div>
                <div class="input-field col s6 m2" style="margin-top: 67px" ng-show="rate.lineWithRate.rateTotal[$index] != 'NaN'">
                        <input disabled id="total" type="text" class="validate" ng-model="rate.lineWithRate.rateTotal[$index]">
                        <label for="total" ng-if="rate.lineWithRate.rateTotal[$index] != 'NaN'">Line total</label>
                    </div>
                <div class="input-field col s6 m1" style="margin-top: 67px">
                        <i class="small mdi-action-highlight-remove" ng-click="removeLineWithRate($index)"></i>
                    </div>
              </div>
            </li>
            <li class="">
              <div class="row form" style="margin-bottom: 0px; padding:10px;background-color: #FFF" ng-repeat="lineWithPrice in lineWithPrices track by $index">
                <div class="input-field col s12 m6">
                   <textarea value="This is a line item with Price - the Qty field is set to 1 and only price can be changed."id="description" class="materialize-textarea" ng-model="price.lineWithPrice.description[$index]" required></textarea>
                       <label for="description">Description of Item</label>
                    </div>
                <div class="input-field col s12 m2" style="margin-top: 67px">
                        <input id="price" name="price" type="text" class="validate" ng-model="price.lineWithPrice.price[$index]" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" required>
                        <label for="price">Price</label>
                        <p class="validate-message" ng-show="sendInvoiceForm.price.$invalid && sendInvoiceForm.price.$dirty">Limit 2 decimals!!!</p>
                    </div>
                <div class="input-field col s12 m1" style="margin-top: 67px">
                        <input disabled value="1" id="quantity" type="text" class="validate" ng-model="price.lineWithPrice.quantity[$index]">
                        <label for="quantity">1</label>
                    </div>
                <div class="input-field col s6 m2" style="margin-top: 67px">
                        <input disabled id="total" type="text" class="validate" ng-model="price.lineWithPrice.price[$index]">
                        <label for="total">Line Total</label>
                    </div>
                <div class="input-field col s6 m1" style="margin-top: 67px">
                        <i class="small mdi-action-highlight-remove" ng-click="removeLineWithPrice($index)"></i>
                    </div>
              </div>
            </li>
    </ul>
  </div>
</div>
<div class="row" style="margin-top: 50px">
 <div class="col s6 valign">
   <div class="file-field input-field">
     <!-- <input class="file-path validate" type="text"/> -->
     <div ng-show="uploader.queue.length" class="form-group">
      <div ng-repeat="item in uploader.queue" ng-if="$last">
        <div class="row">
          <div class="input-field col s8 offset-s2">
            <input type="text" ng-model="item.file.name">
            <label for="">File name</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s8 offset-s2">
          </div>
        </div>
      </div>
    </div>
    <div class="btn tooltipped" data-position="top" data-delay="1" data-tooltip="Attach a File"><i class="mdi-editor-attach-file"></i>
     <input type="file" nv-file-select="" uploader="uploader" />
   </div>
 </div>
</div>
<div class="input-field col s2 offset-s3" style="">
  <p>Sub-Total: {{(subTotalRate + subTotalPrice).toFixed(2)}}</p>
            <p>GST: {{((subTotalRate + subTotalPrice) * 0.1).toFixed(2)}}</p>
            <p>Total: {{((subTotalRate + subTotalPrice) * 0.1 + subTotalRate + subTotalPrice).toFixed(2)}}</p>
</div>
</div>


</div>
<div class="divider"></div>
<div class="modal-footer">
  <button ng-show="uploader.queue.length > 0" type="submit" ng-disable="sendInvoiceForm.$invalid" ng-click="uploadAll()" class="modal-action modal-close waves-effect waves-green btn-flat ">Send Invoice!</button>
  <button ng-hide="uploader.queue.length != 0" type="submit" ng-disable="sendInvoiceForm.$invalid" class="modal-action modal-close waves-effect waves-green btn-flat ">Send Invoice!</button>
  <!-- <a href="#!" ng-click="uploadAll();" >Send Invoice!</a> -->
  <a class="modal-action modal-close waves-effect waves-green btn-flat ">Cancel</a>
</div>
</form>
</div>

<div id="modal_attachVariation" class="modal modal-fixed-footer">
  <form ng-submit="sendVariation()">
    <div class="modal-content">
      <div class="row">
        <div class="col s12">
          <h5>New Variation for {{package.name}}</h5>
        </div>
      </div>
      <div class="row valign-wrapper">
        <div class="input-field col s8 offset-s2">
          <input id="project_name" type="text" class="validate valign" ng-model="variation.title">
          <label for="project_name">Variation Title</label>
        </div>

      </div>
      <div class="row">
        <div class="col s8 offset-s2">
          <ul class="collection z-depth-1">
            <li class="collection-item vlalign-wrapper">
              <div class="row form" style="margin-bottom: 0px">
                <div class="col s12"><p>Enter work descriptions below:</p></div>
                <div class="input-field col s10">
                  <textarea id="description" class="materialize-textarea" ng-model="description" ng-class="{'invalid' : descriptionError}"></textarea>
                  <label for="description" class="">Description</label>
                  <p class="validate-message" ng-if="descriptionError">Scope of work at least 1 item</p>
                </div>
                <div class="valign col s2">
                  <button class="btn" type="button" name="action" style="margin-top: 78px" ng-click="addDescription(description)">Add</button>
                </div>
              </div>
            </li>
            <li class="collection-item vlalign" ng-repeat="description in variation.descriptions track by $index">
              <div class="row" style="margin-bottom: 0px">
                <div class="col s10">
                  <p>{{description}}</p>
                </div>
                <div class="col s2">
                  <button class="btn-flat btn-flat" ng-click="removeDescription($index)">Remove</button>
                </div>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="submit" class="modal-action modal-close waves-effect waves-green btn-flat ">Send Variation!</button>
      <button type="button" class="modal-action modal-close waves-effect waves-green btn-flat ">Cancel</button>
    </div>
  </form>
</div>

<!-- modal for contractor variations -->
<div ng-repeat="variation in package.variations">
  <div class="modal modal-fixed-footer" id="modal-variation-{{variation._id}}">
    <div class="modal-content">
      <div class="col s12">
        <h6>{{variation.title}}</h6>
      </div>
      <div class="col s12">
        <p>{{variation.description}}</p>
      </div>
    </div>
    <div class="modal-footer">
      <a class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
    </div>
  </div>
</div>

<!-- modal for contractor defects -->
<div ng-repeat="defect in package.defects" class="modal modal-fixed-footer" id="modal-defect-{{defect._id}}">
  <div class="modal-content">
    <div class="col s12">
      <h5>Defect {{defect.title}}</h5>
    </div>
    <div class="col s12">
      <p>In {{defect.location}}, with description {{defect.description}}</p>
    </div>
  </div>
  <div class="modal-footer">
    <a class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
  </div>
</div>

<!-- modal for contractor invoice -->
<div ng-repeat="invoice in package.invoices" class="modal modal-fixed-footer" id="modal-invoice-{{invoice._id}}">
  <div class="modal-content">
    <div class="col s12">
      <h5>Invoice {{invoice.title}} with total {{invoice.total}}</h5>
    </div>
    <div class="col s12">
      <table>
        <thead>
          <th>#</th>
          <th>Description</th>
          <th>Price</th>
          <th>Quantity</th>
          <th>Total</th>
        </thead>
        <tbody>
          <tr ng-repeat="price in invoice.quotePrice">
            <td>{{$index + 1}}</td>
            <td>{{price.description}}</td>
            <td>{{price.price}}</td>
            <td>1</td>
            <td>{{price.total}}</td>
          </tr>
          <tr ng-repeat="rate in invoice.quoteRate">
            <td>{{$index + 1}}</td>
            <td>{{rate.description}}</td>
            <td>{{rate.rate}}</td>
            <td>{{rate.quantity}}</td>
            <td>{{rate.total}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="modal-footer">
    <a class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
  </div>
</div>

<!-- modal for contractor document -->
<div ng-repeat="file in documents" class="modal modal-fixed-footer" id="modal-file-{{file._id}}">
  <div class="modal-content">
    <div class="col s12">
      <h5>{{file.title}}</h5>
    </div>
    <div class="col s12">
      <p>{{file.description}}</p>
    </div>
    <div class="col s12">
      <a href='{{file.fileUrl}}' download="file.name" style="cursor:pointer">Download file</a>
    </div>
  </div>
  <div class="modal-footer">
    <a class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
  </div>
</div>

<div id="attachVariationWithQuote" class="modal modal-fixed-footer">
  <form ng-submit="sendVariation()" name="sendVariationForm">
    <div class="modal-content">
    
       <div class="row">
         <div class="col s12">
           <h5>New Variation for {{package.name}}</h5>
         </div>
       </div>
       <div class="row valign-wrapper">
         <div class="input-field col s8">
                 <input id="project_name" type="text" class="validate valign" ng-model="variation.title">
                 <label for="project_name">Variation Title</label>
             </div>
         <div class="col s4">
           <p>
               <input type="checkbox" id="quote_later" class="valign" ng-model="quoteLater"/>
               <label for="quote_later">Attach Quote Later</label>
           </p>
         </div>
       </div>
       <div class="row">
        <div class="col s12">
          <ul class="collection z-depth-1">
            <li class="collection-item vlalign-wrapper">
              <div class="row form" style="margin-bottom: 0px">
                <div class="col s12"><p>Enter work descriptions below:</p></div>
                <div class="input-field col s8 m10">
                  <textarea id="description" class="materialize-textarea" ng-model="description" ng-class="{'invalid' : descriptionError}"></textarea>
                  <label for="description" class="">Description</label>
                  <p class="validate-message" ng-if="descriptionError">Scope of work at least 1 item</p>
                </div>
                <div class="valign col s2 m2">
                  <button class="btn" type="button" name="action" style="margin-top: 78px" ng-click="addDescription(description)">Add</button>
                </div>
              </div>
            </li>
            <li class="collection-item vlalign" ng-repeat="description in variation.descriptions track by $index">
              <div class="row" style="margin-bottom: 0px">
                <div class="col s6 m10">
                  <p style="word-break:break-all">{{description}}</p>
                </div>
                <div class="col s2">
                  <button class="btn-flat btn-flat" ng-click="removeDescription($index)">Remove</button>
                </div>
              </div>
            </li>

          </ul>
        </div>
       </div>
       <div class="row">
         
         
       </div>
       <div class="row" ng-hide="quoteLater">
       <div class="col s12">
        <ul class="collection z-depth-1">
          <li class="collection-item vlalign-wrapper">
            <div class="row" style="margin-bottom: 0px">
              <div class="col s6 valign center-align background-hover">
                <a ng-click="addLineWithRate()" class="waves-effect waves-light" style="color:#000;">Add Line with Rate</a>
              </div>
              <div class="col s6 valign center-align background-hover">
                <a ng-click="addLineWithPrice()" class="waves-effect waves-light" style="color:#000;">Add Line with Price</a>
              </div>
            </div>
          </li>
          <li class="">
              <div class="row form" style="margin-bottom: 0px;padding:10px;background-color: #FFF" ng-repeat="lineWithRate in lineWithRates track by $index">
                <div class="input-field col s12 m6">
                   <textarea value="This is a line item with Rate - note the field for qty is editable"id="description" class="materialize-textarea" ng-model="rate.lineWithRate.rateDescription[$index]" required></textarea>
                       <label for="description">Description of Item</label>
                    </div>
                <div class="input-field col s12 m2" style="margin-top: 67px">
                        <input id="rate" name="rate" type="text" class="validate" ng-model="rate.lineWithRate.rate[$index]" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" required>
                        <label for="rate">Rate</label>
                        <p class="validate-message" ng-show="sendVariationForm.rate.$invalid && sendVariationForm.rate.$dirty">Limit 2 decimals!!!</p>
                    </div>
                <div class="input-field col s12 m1" style="margin-top: 67px">
                        <input id="quantity" type="text" class="validate" ng-model="rate.lineWithRate.rateQuantity[$index]" required>
                        <label for="quantity">Qty</label>
                    </div>
                    <span style="display:none">{{rate.lineWithRate.rateTotal[$index] = (rate.lineWithRate.rate[$index] * rate.lineWithRate.rateQuantity[$index]).toFixed(2)}}</span>
                <div class="input-field col s6 m2" style="margin-top: 67px" ng-hide="rate.lineWithRate.rateTotal[$index] != 'NaN'">
                  <input type="text" disabled id="rateTotal">
                  <label for="rateTotal">Line total</label>
                </div>
                <div class="input-field col s6 m2" style="margin-top: 67px" ng-show="rate.lineWithRate.rateTotal[$index] != 'NaN'">
                        <input disabled id="total" type="text" class="validate" ng-model="rate.lineWithRate.rateTotal[$index]">
                        <label for="total" ng-if="rate.lineWithRate.rateTotal[$index] != 'NaN'">Line total</label>
                    </div>
                <div class="input-field col s6 m1" style="margin-top: 67px">
                        <i class="small mdi-action-highlight-remove" ng-click="removeLineWithRate($index)"></i>
                    </div>
              </div>
            </li>
            <li class="">
              <div class="row form" style="margin-bottom: 0px;padding:10px;background-color: #FFF" ng-repeat="lineWithPrice in lineWithPrices track by $index">
                <div class="input-field col s12 m6">
                   <textarea value="This is a line item with Price - the Qty field is set to 1 and only price can be changed."id="description" class="materialize-textarea" ng-model="price.lineWithPrice.description[$index]" required></textarea>
                       <label for="description">Description of Item</label>
                    </div>
                <div class="input-field col s12 m2" style="margin-top: 67px">
                        <input id="price" name="price" type="text" class="validate" ng-model="price.lineWithPrice.price[$index]" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" required>
                        <label for="price">Price</label>
                        <p class="validate-message" ng-show="sendVariationForm.price.$invalid && sendVariationForm.price.$dirty">Limit 2 decimals!!!</p>
                    </div>
                <div class="input-field col s12 m1" style="margin-top: 67px">
                        <input disabled value="1" id="quantity" type="text" class="validate" ng-model="price.lineWithPrice.quantity[$index]">
                        <label for="quantity">1</label>
                    </div>
                <div class="input-field col s6 m2" style="margin-top: 67px">
                        <input disabled id="total" type="text" class="validate" ng-model="price.lineWithPrice.price[$index]">
                        <label for="total">Line Total</label>
                    </div>
                <div class="input-field col s6 m1" style="margin-top: 67px">
                        <i class="small mdi-action-highlight-remove" ng-click="removeLineWithPrice($index)"></i>
                    </div>
              </div>
            </li>
    </ul>
  </div>
<div class="row" style="margin-top: 50px">
 <div class="col s6 valign">
   <div class="file-field input-field">
     <!-- <input class="file-path validate" type="text"/> -->
     <div ng-show="uploader.queue.length" class="form-group">
      <div ng-repeat="item in uploader.queue" ng-if="$last">
        <div class="row">
          <div class="input-field col s8 offset-s2">
            <input type="text" ng-model="item.file.name">
            <label for="">File name</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s8 offset-s2">
          </div>
        </div>
      </div>
    </div>
    <div class="btn tooltipped" data-position="top" data-delay="1" data-tooltip="Attach a File"><i class="mdi-editor-attach-file"></i>
     <input type="file" nv-file-select="" uploader="uploader" />
   </div>
 </div>
</div>
<div class="input-field col s2 offset-s3" style="">
  <p>Sub-Total: {{(subTotalRate + subTotalPrice).toFixed(2)}}</p>
  <p>GST: {{((subTotalRate + subTotalPrice) * 0.1).toFixed(2)}}</p>
  <p>Total: {{((subTotalRate + subTotalPrice) * 0.1 + subTotalRate + subTotalPrice).toFixed(2)}}</p>
</div>
</div>
</div>
     
    </div>
  <div class="divider"></div>
    <div class="modal-footer">
      <button ng-show="uploader.queue.length > 0" type="submit" ng-disable="sendInvoiceForm.$invalid" ng-click="uploadAll()" class="modal-action modal-close waves-effect waves-green btn-flat ">Send Variation!</button>
      <button ng-hide="uploader.queue.length != 0" type="submit" ng-disable="sendInvoiceForm.$invalid" class="modal-action modal-close waves-effect waves-green btn-flat ">Send Variation!</button>
      <!-- <button ng-click="uploadAll()" type="submit" class="modal-action modal-close waves-effect waves-green btn-flat " >Send Variation!</button> -->
     <a class="modal-action modal-close waves-effect waves-green btn-flat ">Cancel</a>
    </div>
    </form>
</div>


