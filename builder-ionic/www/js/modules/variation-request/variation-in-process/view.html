<div class="row" style="margin-top: 18px">
  <h5 class="col s8">Variation {{variationRequest.name}} in Progress</h5>
 <div class="col s4" style="margin-top:15px">
   <a class='dropdown-button btn-flat right tooltipped' data-position="top" data-delay="1" data-tooltip="Attach..." href='#'
      data-activates='itemActions' dropdown data-beloworigin="true" data-constrainwidth="false">
      <i class="mdi-navigation-more-vert"></i>
   </a>

   <!-- Dropdown Structure -->
   <ul id='itemActions' class='dropdown-content' ng-if="variationRequest.packageType == 'contractor' || variationRequest.packageType == 'supplier'">
     <li ng-if="currentTeam.type == 'builder'"><a class="modal-trigger" href="#modal_attachDefect">Attach Defect</a></li>
     <li><a class="modal-trigger" href="#modal_attachDocument">Attach Document</a></li>
     <li ng-if="currentTeam.type == 'contractor'"><a class="modal-trigger" href="#attachInvoice">Attach Invoice</a></li>
     <div class="divider"  ng-if="isLeader"></div>
     <li><a class="modal-trigger" ng-if="isLeader && currentTeam.type =='builder' && !variationRequest.isCompleted" href="#modal_complete">Mark as complete</a></li>
     <li><a class="modal-trigger" ng-if="isLeader && currentTeam.type =='builder' && variationRequest.isCompleted" href="#modal_complete">Mark as in progress</a></li>
   </ul>

   <ul id='itemActions' class='dropdown-content' ng-if="variationRequest.packageType == 'BuilderPackage'">
     <li ng-if="currentTeam.type == 'homeOwner'"><a class="modal-trigger" href="#modal_attachDefect">Attach Defect</a></li>
     <li><a class="modal-trigger" href="#modal_attachDocument">Attach Document</a></li>
     <li ng-if="currentTeam.type == 'builder'"><a class="modal-trigger" href="#attachInvoice">Attach Invoice</a></li>
     <div class="divider"  ng-if="isLeader"></div>
     <li><a class="modal-trigger" ng-if="isLeader && currentTeam.type =='homeOwner' && !variationRequest.isCompleted" href="#modal_complete">Mark as complete</a></li>
     <li><a class="modal-trigger" ng-if="isLeader && currentTeam.type =='homeOwner' && variationRequest.isCompleted" href="#modal_complete">Mark as in progress</a></li>
   </ul>

 </div>
</div>
<div class="row">
  <div class="col s12">
    <ul class="collapsible" data-collapsible="accordion">
      <li>
        <div class="collapsible-header"><i class=""></i>Details</div>
        <div class="collapsible-body" style="background-color: #FFF; padding:10px">
          <p class="col s12">Variation name : <span class="highlight">{{variationRequest.name}}</span></p>
          <p class="col s12">Scope of Work : {{variationRequest.description}}</p>
          <p class="col s12">Contractor team: <span class="highlight">{{variationRequest.to._id.name}}</span></p>
          <p class="col s12">Member: </p>
          <div class="card col admin" style="padding: 5px; margin-left: 10px" ng-repeat="leader in variationRequest.to._id.leader">
            {{leader.email}}
          </div>
          <div class="card col" style="padding: 5px; margin-left: 10px" ng-repeat="member in variationRequest.to._id.member">
            {{member._id.email}}
          </div>
          <p class="col s12">Package status : <span class="highlight">{{(!variationRequest.isCompleted) ? 'In progress' : 'Completed'}}</span></p>
        </div>
      </li>
    </ul>
  </div>
</div>

           
<div class="row">
 <div task package="variationRequest" type="variation"></div>
  <addOn package="variationRequest" type="variation"></addOn>
</div>
               

<div message package="variationRequest" type="variation"></div>
<div ng-include="'js/modules/contractor-request/contractor-package-in-process/complete.modal.html'"></div>

