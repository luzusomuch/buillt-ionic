<div class="col s12" style="margin-bottom: 8px">
  <a class="waves-effect waves-light btn modal-trigger" href="#newTeam" ng-if="!currentTeam._id">Create New Team</a>
</div>
<div class="col s12" ng-if="currentTeam._id">
  <ul class="collapsible popout s10" data-collapsible="accordion">

    <li class="active">
      <div class="collapsible-header active">{{currentTeam.name}}</div>
      <div class="collapsible-body" style="display: block; background-color: white;">
        <div class="row">
          <div class="col s12  z-depth-1">
            <ul class="tabs" style="width: 100%;" tabs>
              <li class="tab col s3" style="width: 50%;"><a class="" href="#details1">Details</a></li>
              <li class="tab col s3" style="width: 50%;"><a href="#members1" class="active">Members</a></li>
              <div class="indicator" style="right: -1px; left: 504px;"></div></ul>
          </div>
          <div id="details1" class="col s12" style="padding-top:15px">
            <div class="row">
              <form ng-submit="saveDetail()">
                <div class="col s12">
                  <div class="input-field col s10 offset-s1" ng-if="currentTeam.type != 'homeOwner'">
                    <input ng-disabled="!isEdit" ng-model="currentTeam.detail.companyName" id="companyName" type="text">
                    <label class="active" for="companyName">Company Name</label>
                  </div>
                  <div class="input-field col s10 offset-s1" ng-if="currentTeam.type != 'homeOwner'">
                    <input ng-disabled="!isEdit" ng-model="currentTeam.detail.companyAddress" id="companyAddress" type="text">
                    <label class="active" for="companyAddress">Company Address</label>
                  </div>
                  <div class="input-field col s10 offset-s1" ng-if="currentTeam.type != 'homeOwner'">
                    <input ng-disabled="!isEdit" ng-model="currentTeam.detail.contactNumber" id="contactNumber" type="text">
                    <label class="active" for="contactNumber">Contact Number</label>
                  </div>
                  <div class="input-field col s10 offset-s1" ng-if="currentTeam.type != 'homeOwner'">
                    <input ng-disabled="!isEdit" ng-model="currentTeam.detail.licenseNumber"  id="licenseNumber" type="text">
                    <label class="active" for="licenseNumber">License Number</label>
                  </div>
                  <div class="input-field col s10 offset-s1" ng-if="currentTeam.type == 'homeOwner'">
                    <input ng-disabled="!isEdit" ng-model="currentTeam.detail.billingAddress  " id="billingAddress" type="text" >
                    <label class="active" for="billingAddress">Billing address</label>
                  </div>
                  <button ng-if="isLeader" ng-hide="isEdit" class="col offset-s1 btn waves-effect waves-light" type="button" ng-click="editDetail()" name="action">Edit
                  </button>
                  <button ng-if="isEdit" class="col offset-s1 btn waves-effect waves-light" type="submit" name="action">Save
                  </button>
                </div>
              </form>
            </div>
          </div>
          <div id="members1" class="col s12">
            <div class="tab-content">
              <div class="row">
                <div class="">
                  <a href=""></a>
                  <table class="team bordered">
                    <thead>
                    <th class="col s3">Member email</th>
                    <th class="col s3">Member name</th>
                    <th class="col s2">Type</th>
                    <th class="col s2">Status</th>
                    <th class="col s2 center-align">Action</th>
                    </thead>
                    <tbody>
                    <tr ng-repeat="leader in currentTeam.leader">
                      <td class="col s3" style="word-break:break-all">{{leader.email}}</td>
                      <td class="col s3" style="word-break:break-all">{{leader.firstName}} {{leader.lastName}}</td>
                      <td class="col s2" style="word-break:break-all">Admin</td>
                      <td class="col s2" style="word-break:break-all">Active</td>
                      <td class="col s2 center-align">
                      </td>
                    </tr>
                    <tr ng-repeat="member in currentTeam.member | orderBy : ['status']">
                      <td class="col s3" style="word-break:break-all">{{(member.email) ? member.email : member._id.email}}</td>
                      <td class="col s3" style="word-break:break-all">{{(member._id) ? member._id.firstName + ' ' + member._id.lastName : '&nbsp;'}}</td>
                      <td class="col s2" style="word-break:break-all">Member</td>
                      <td class="col s2" style="word-break:break-all">{{member.status}}</td>
                      <td class="col s2 center-align">
                        <a class="waves-effect waves-light" name="action" ng-click="assignLeader(member)"
                           ng-if="isLeader && leader._id != user._id && member._id && member.status == 'Active'">
                          <i class="material-icons">supervisor_account</i>
                        </a>
                        <a class="waves-effect waves-light" name="action" ng-click="removeMember(member)"
                           ng-if="isLeader && leader._id != user._id">
                          <i class="mdi-action-highlight-remove tiny"></i>
                        </a>
                      </td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="row">
                <a class="waves-effect waves-light btn modal-trigger" href="#newMember" ng-if="isLeader">Add new member</a>
                <a class="waves-effect waves-light btn" ng-if="!isLeader || currentTeam.leader.length > 1" ng-click="leaveTeam()">Leave this team</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </li>
  </ul>
</div>

<div class="col s12" ng-if="!currentTeam._id && invitations.length > 0">
  <div class="row">
    <h5 class="header">List of Invitation</h5>
    <div class="row">
      <div class="z-depth-1">
        <a href=""></a>
        <table class="team">
          <thead>
          <th class="col s1">#</th>
          <th class="col s5">Team name</th>
          <th class="col s1">Type</th>
          <th class="col s3">Number of members</th>
          <th class="col s2 center-align">Action</th>
          </thead>
          <tbody>
          <tr ng-repeat="invitation in invitations">
            <td class="col s1">{{$index + 1 }}</td>
            <td class="col s5">{{invitation.name}}</td>
            <td class="col s1">{{invitation.type}}</td>
            <td class="col s3">{{invitation.member.length}}</td>
            <td class="col s2 center-align">
              <a class="waves-effect waves-light" name="action" ng-click="accept(invitation,$index)">
                <i class="mdi-navigation-check tiny"></i>
              </a>
              <a class="waves-effect waves-light" name="action" ng-click="reject(invitation,$index)">
                <i class="mdi-navigation-cancel tiny"></i>
              </a>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
        <!-------------------------------------------------->
<div ng-include="'js/modules/team/manager-team/create.html'"></div>

<div id="newMember" class="modal">
  <form name="newMemberForm" ng-submit="addNewMember()">
    <div class="modal-content">
      <div class="row">
        <div class="input-field col s12">
          <angucomplete-alt id="ex1"
                            pause="100"
                            selected-object="member.email"
                            local-data="users"
                            search-fields="email"
                            title-field="email"
                            minlength="1"
                            input-changed="inputChanged"
                            template-url="/my-custom-template.html"
                            input-class="col s9"></angucomplete-alt>

          <a class="btn waves-effect waves-light right" name="action" ng-click="addUser()"> <i class="mdi-content-add tiny"></i></a>

          <ul>
            <li class="collection-item vlalign" ng-repeat="email in member.emails">
              <div class="row" style="margin-bottom: 5px">
                <div class="col s8">{{email.email}}</div>
                <div class="col s4">
                  <a class="btn waves-effect waves-light right" name="action" ng-click="removeUser($index)"> <i class="mdi-content-remove tiny"></i></a>
                </div>
              </div>
            </li>
          </ul>

        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="modal-action modal-close waves-effect waves-green btn-flat" ng-disabled="team.emails.length <= 0" type="submit">Add new member</button>
      <button class="modal-action modal-close btn-flat" type="button">Close</button>
    </div>
  </form>
</div>


<script type="text/ng-template" id="/my-custom-template.html">
  <div class="angucomplete-holder" ng-class="{'angucomplete-dropdown-visible': showDropdown}">
    <input ng-model="searchStr"
           id="email"
           ng-disabled="disableInput"
           type="text"
           placeholder="{{placeholder}}"
           ng-focus="onFocusHandler()"
           class="{{inputClass}}"
           ng-focus="resetHideResults()"
           ng-blur="hideResults($event)"

           autocapitalize="off"
           autocorrect="off"
           autocomplete="off"
           ng-change="inputChangeHandler(searchStr)"/>
    <label for="email">Email</label>
    <div class="angucomplete-dropdown col s9" ng-show="showDropdown">
      <div class="angucomplete-searching" ng-show="searching" ng-bind="textSearching"></div>
      <div class="angucomplete-searching" ng-show="!searching && (!results || results.length == 0)" ng-bind="textNoResults"></div>
      <div class="angucomplete-row" ng-repeat="result in results" ng-click="selectResult(result)" ng-mouseenter="hoverRow($index)" ng-class="{'angucomplete-selected-row': $index == currentIndex}">
        <div ng-if="imageField" class="angucomplete-image-holder">
          <img ng-if="result.image && result.image != ''" ng-src="{{result.image}}" class="angucomplete-image"/>
          <div ng-if="!result.image && result.image != ''" class="angucomplete-image-default"></div>
        </div>
        <div class="angucomplete-title" ng-if="matchClass" ng-bind-html="result.title"></div>
        <div class="angucomplete-title" ng-if="!matchClass">{{ result.title }}</div>
        <div ng-if="matchClass && result.description && result.description != ''" class="angucomplete-description" ng-bind-html="result.description"></div>
        <div ng-if="!matchClass && result.description && result.description != ''" class="angucomplete-description">{{result.description}}</div>
      </div>

    </div>
  </div>
</script>