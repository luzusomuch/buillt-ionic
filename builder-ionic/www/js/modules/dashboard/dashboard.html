<!-- <div class="col s12">
    <h3>Projects</h3>
    <ul>
        <li ng-repeat="project in projects | unique:project">
            <a ui-sref="projects.view({id:project._id})">{{project.name}}</a>
        </li>
    </ul>
</div> -->
<ion-view title="Projects">
    <ion-nav-buttons side="left">
        <!-- <a ng-click="toggleMenu()" class="button button-icon"><i class="icon ion-navicon"></i></a> -->
        <button class="button button-clear icon-right ion-ios-gear-outline" ng-click="showConfig()"></button>
    </ion-nav-buttons>
    <ion-nav-buttons side="right">
        <button class="button button-clear icon-right ion-ios-plus-empty" ng-click="createTaskThreadDocument()"></button>
    </ion-nav-buttons>
    <div class="bar bar-subheader row" style="border-bottom: solid 1px #efefef">
        <div class="button-bar">
            <a class="button button-outline button-positive icon-right ion-ios-arrow-down" style="font-size: 10px" ng-click="chooseProject()">{{(selectedProject.name) ? selectedProject.name : 'All Projects'}}</a>
            <a class="button button-outline button-positive icon-right ion-ios-arrow-down" style="font-size: 10px" ng-click="choosePackageModal()">{{(currentPackage.name) ? currentPackage.name : 'All Packages'}}</a>
        </div>
    </div>

    <ion-tabs class="tabs-icon-top">
        <ion-tab ng-click="selectTabWithIndex(0)" title="Messages" icon="ion-ios7-chatboxes-outline">
            <div message></div>
        </ion-tab>
        <ion-tab ng-click="selectTabWithIndex(1)" title="Tasks" icon="ion-ios7-checkmark-outline">
            <div task></div>
        </ion-tab>
        <ion-tab ng-click="selectTabWithIndex(2)" title="Documents" icon="ion-ios-copy-outline">
            <div document></div>
        </ion-tab>
        <ion-tab ng-click="selectTabWithIndex(3)" title="{{totalNotifications}} Notifications" icon="ion-ios-bell-outline">
            <div sp-notification></div>
        </ion-tab>
    </ion-tabs>
    <!-- <ion-side-menus>
        <ion-side-menu side="left">
            <ion-header-bar class="bar-stable">
                <h1 class="title">buiilt</h1>
            </ion-header-bar>
            <div class="bar bar-subheader row" style="border-bottom: solid 1px #efefef">
                <div class="button-bar">
                    <a class="button button-outline button-positive icon-right ion-ios-arrow-down" style="font-size: 10px">All Projects</a>
                    <a class="button button-outline button-positive icon-right ion-ios-arrow-down" style="font-size: 10px">All Packages</a>
                </div>
            </div>
            <ion-content padding="false" scroll="false" class="has-header">
                <ion-list>
                    <label class="item item-select">
                        <span class="input-label">{{(headingName) ? headingName : "Project"}}</span>
                        <select ng-model="type" ng-change="clickChange(type)" style="padding: 0px 45px 0px 0px">
                            <option ng-selected="project._id == selectProject._id" ng-if="!hasCurrentProject" value="{{project._id}}" ng-repeat="project in projects | unique:project">
                                {{project.name}}
                            </option>
                        </select>
                    </label>
                    <ion-item class="item-divider"></ion-item>
                    <ion-item ng-if="currentTeam.type == 'builder'" ng-click="choosePackage(1)">
                        Client
                    </ion-item>
                    <ion-item ng-if="currentTeam.type == 'homeOwner'" ng-click="choosePackage(1)">
                        Builder
                    </ion-item>
                    <ion-item ng-if="currentTeam.type == 'builder'" ng-click="choosePackage(2)">
                        Subcontractors
                    </ion-item>
                    <ion-item ng-if="currentTeam.type == 'contractor'" ng-click="choosePackage(2)">
                        Contracts
                    </ion-item>
                    <ion-item ng-if="currentTeam.type == 'builder'" ng-click="choosePackage(3)">
                        Suppliers
                    </ion-item>
                    <ion-item ng-if="currentTeam.type == 'supplier'" ng-click="choosePackage(3)">
                        Materials
                    </ion-item>
                    <ion-item ng-if="currentTeam.type == 'builder'" ng-click="choosePackage(4)">Employees</ion-item>
                    <ion-item ng-click="choosePackage(5)">Documentation</ion-item>
                </ion-list>
                <div class="spacer" style="width: 255px; height: 34px;"></div>
                <a class="button button-positive button-clear button-block " ui-sref="notifications"><i class="icon ion-ios7-bell"></i>{{total}} Notification</a>
                <a ui-sref="signout" class="button button-positive button-clear button-block ">Sign Out</a>
            </ion-content>
        </ion-side-menu>
        <ion-pane ion-side-menu-content="">
            <ion-content padding="false">
                <div class="list" ng-if="hasResourceType">
                    <ion-item ng-click="goToResourceDetail(package)" ng-repeat="package in currentSelectResource">
                        {{package.name}}
                    </ion-item>
                </div>
                <div ng-if="isShowDefault" style="padding-left:20px;">
                    <h5>Select a Project from Menu above</h5>
                </div>
                <div ng-if="isShowContractorPackage" class="list">
                    <ion-item ui-sref="contractorRequestInProgress({id:package.project, packageId: package._id})" ng-repeat="package in contractorPackages | filter:{isAccept: true, isCompleted: false}">{{package.name}}</ion-item>
                </div>
                <div ng-if="isShowMaterialPackage" class="list">
                    <ion-item ui-sref="materialRequestInProcess({id:package.project, packageId: package._id})" ng-repeat="package in materialPackages | filter:{isSelect: true, isCompleted: false}">{{package.name}}</ion-item>
                </div>
                <div ng-if="isShowStaffPackage" class="list">
                    <ion-item ui-sref="staffView({id:package.project, packageId: package._id})" ng-repeat="package in staffPackages">{{package.name}}</ion-item>
                </div>
                <div ng-if="isShowDocumentation" class="list">
                    <ion-item ui-sref="fileDetail({fileId: file._id})" ng-repeat="file in files">
                        <h2 ng-if="file.isNewNotification"><strong>{{file.title}}</strong></h2>
                        <p ng-if="file.isNewNotification"><strong>{{file.description}}</strong></p>

                        <h2 ng-if="!file.isNewNotification">{{file.title}}</h2>
                        <p ng-if="!file.isNewNotification">{{file.description}}</p>
                    </ion-item>
                </div>
            </ion-content>
        </ion-pane>
    </ion-side-menus> -->
</ion-view>

<script id="modalProject.html" type="text/ng-template">
    <div class="modal">
        <ion-header-bar class="bar-light">
            <h class="title">Please choose the project</h>
            <div class="buttons">
                <button ng-click="closeModal('Project')" class="button button-stable button-icon button-large icon ion-ios7-checkmark-empty"></button>
            </div>
        </ion-header-bar>
        <ion-content padding="true" class="has-header">
            <ion-list ng-repeat="project in projects | unique:project">
                <ion-item ng-click="clickChange(project)">{{project.name}}</ion-item>
            </ion-list>
        </ion-content>
    </div>
</script>

<script id="modalPackage.html" type="text/ng-template">
    <div class="modal">
        <ion-header-bar class="bar-light">
            <h class="title">Please choose the package</h>
            <div class="buttons">
                <button ng-click="closeModal('Package')" class="button button-stable button-icon button-large icon ion-ios7-checkmark-empty"></button>
            </div>
        </ion-header-bar>
        <ion-content padding="true" class="has-header">
            <ion-list>
                <ion-item ng-if="!selectedProject._id">Please select a project first</ion-item>
                <ion-item ng-if="builderPackage.name || currentTeam.type == 'builder' || currentTeam.type == 'homeOwner' || currentTeam.type == 'architect'" ng-click="getPackage(builderPackage)">{{builderPackage.name}}</ion-item>
                <ion-item ng-if="designPackages.length > 0" ng-repeat="package in designPackages" ng-click="getPackage(package)">{{package.name}}</ion-item>
                <ion-item ng-if="currentTeam.type == 'builder' || currentTeam.type == 'contractor'" ng-repeat="package in contractorPackages" ng-click="getPackage(package)">{{package.name}}</ion-item>
                <ion-item ng-if="currentTeam.type == 'builder' || currentTeam.type == 'supplier'" ng-repeat="package in materialPackages" ng-click="getPackage(package)">{{package.name}}</ion-item>
                <ion-item ng-if="currentTeam.type == 'builder'" ng-repeat="package in staffPackages" ng-click="getPackage(package)">{{package.name}}</ion-item>
            </ion-list>
        </ion-content>
    </div>
</script>

<script id="modalCreateTask.html" type="text/ng-template">
    <div class="modal">
        <ion-header-bar class="bar-light">
            <h class="title">Create new task</h>
            <div class="buttons">
                <button ng-click="closeModal('CreateTask')" class="button button-stable button-icon button-large icon ion-ios7-checkmark-empty"></button>
            </div>
        </ion-header-bar>
        <ion-content padding="true" class="has-header">
            <form style="padding:10px;" id="createTaskForm" name="form" class="col s12" ng-submit="createNewTask(form)">
            
                <div class="spacer" style="display: inline-block; width: 300px; height: 20px;"></div>
            
                <div class="item item-input">
                    <input placeholder="Task Description" id="task_description" type="text" ng-model="task.name" name="name" maxlength="80"
                       ng-class="{'invalid' : form.name.$invalid && submitted}" ng-disabled="isShow">
                    <p class="validate-message" ng-show="form.name.$error.required && submitted">Task name is required</p>
                </div>
            
                <div class="spacer" style="display: inline-block; width: 300px; height: 20px;"></div>
            
                <div class="item item-input">
                    <input ng-if="!isShowInputDate" id="showDueDate" type="text" placeholder="Due Date" ng-click="callDateInput()" ng-value="date">
                    <input ng-if="isShowInputDate" type="date" placeholder="Due Date"
                       name="created"
                       id="dueDate"
                       ng-model="task.dateEnd"
                       format="mm/dd/yyyy"
                       ng-disabled="isShow"
                    />
                </div>
            
                <div class="spacer" style="display: inline-block; width: 300px; height: 20px;"></div>
            
                <div class="available-assign"  ng-if="!isShow" style="padding: 15px 0px;">
                    <p style="font-size: 16px">Assignees:</p>
                    <ul class="list">
                        <li class="item item-checkbox" ng-repeat="staff in available track by $index">
                            <div class="checkbox">
                                <input type="checkbox" ng-click="assign(staff, $index)">
                            </div>
                            {{staff | name}}
                        </li>
                    </ul>
                </div>
            
                <div class="spacer" style="width: 300px; height: 44px;"></div>
            
                <div class="row" style="">
                    <button class="button button-positive button-outline button-block" type="submit" ng-if="!isShow" name="action">Add Task
                    </button>
                </div>
                <div class="spacer" style="width: 300px; height: 50px;"></div>
                <div class="row" style="display:none">
                    <button class="button button-stable button-block cancel-task" type="button" ng-click="cancelTask()">Cancel</button>
                </div>
            </form>
        </ion-content>
    </div>
</script>

<script id="modalCreateThread.html" type="text/ng-template">
    <div class="modal">
        <ion-header-bar class="bar-light">
            <h class="title">Create new thread</h>
            <div class="buttons">
                <button ng-click="closeModal('CreateThread')" class="button button-stable button-icon button-large icon ion-ios7-checkmark-empty"></button>
            </div>
        </ion-header-bar>
        <ion-content padding="true" class="has-header">
            <form style="padding:10px;" id="createThreadForm" name="form" novalidate ng-submit="createNewThread(form)">

                <div class="spacer" style="display: inline-block; width: 300px; height: 20px;"></div>

                <div class="item item-input">
                    <input placeholder="Message Name" id="thread_name" type="text" ng-model="thread.name" required name="name" ng-class="{'invalid' : form.name.$invalid && submitted}">
                    <p class="validate-message" ng-show="form.name.$error.required && submitted">Thread name is required</p>
                </div>

                <div class="spacer" style="display: inline-block; width: 300px; height: 20px;"></div>

                <div class="available-assign" >
                    <p style="">Recipients:</p>
                    <ul class="list">
                        <li class="item item-checkbox" ng-repeat="user in availableAssigneesInThread track by $index">
                            <div class="checkbox">
                                <input type="checkbox" ng-click="assign(user, $index)">
                            </div>
                            {{user | name}}
                        </li>
                    </ul>
                </div>
                <div class="spacer" style="width: 300px; height: 50px;"></div>
                <div class="row" style="">
                    <button class="button button-positive button-outline button-block" type="submit">Add message</button>
                </div>
            </form>
        </ion-content>
    </div>
</script>

<script id="modalCreateDocument.html" type="text/ng-template">
    <div class="modal">
        <ion-header-bar class="bar-light">
            <h class="title">Create new document</h>
            <div class="buttons">
                <button ng-click="closeModal('CreateDocument')" class="button button-stable button-icon button-large icon ion-ios7-checkmark-empty"></button>
            </div>
        </ion-header-bar>
        <ion-content padding="true" class="has-header">
            <div class="list" ng-if="!selectedProject._id && !currentPackage._id">
                <ion-item>
                    Please select the project or the package to upload.
                </ion-item>
            </div>
            <form ng-submit="uploadNewDocument()" name="uploadForm" ng-if="selectedProject._id || currentPackage._id">
                <div class="spacer" style="display: inline-block; width: 300px; height: 50px;"></div>
                <div class="item item-input">
                    <input placeholder="Document title" type="text" ng-model="file.title" required name="title" ng-class="{'invalid' : uploadForm.name.$invalid && submitted}">
                    <p class="validate-message" ng-show="uploadForm.title.$error.required && submitted">Document title is required</p>
                </div>

                <div class="spacer" style="display: inline-block; width: 300px; height: 20px;"></div>
                <div class="item item-input">
                    <input onchange="angular.element(this).scope().getFileUpload()" id="read-input" type="file"></input>
                </div>

                <div class="spacer" style="display: inline-block; width: 300px; height: 20px;"></div>
                <div class="item item-input">
                    <input placeholder="Document description" type="text" ng-model="file.desc" required name="description" ng-class="{'invalid' : uploadForm.description.$invalid && submitted}">
                    <p class="validate-message" ng-show="uploadForm.description.$error.required && submitted">Document description is required</p>
                </div>

                <div class="spacer" style="display: inline-block; width: 300px; height: 50px;"></div>
                <div class="row" style="">
                    <button class="button button-positive button-outline button-block" type="submit">Add document</button>
                </div>
            </form>
        </ion-content>
    </div>
</script>

<script id="modalConfig.html" type="text/ng-template">
    <div class="modal">
        <ion-header-bar class="bar-light">
            <h class="title">Configuration</h>
            <div class="buttons">
                <button ng-click="closeModal('Config')" class="button button-stable button-icon button-large icon ion-ios7-checkmark-empty"></button>
            </div>
        </ion-header-bar>
        <ion-content padding="true" class="has-header">
            <div class="spacer" style="width: 255px; height: 34px;"></div>
            <a ng-click="closeModal('Config')" ui-sref="signout" class="button button-positive button-clear button-block ">Sign Out</a>
        </ion-content>
    </div>
</script>