<div class="row" style="margin-top: 18px">
   <h5 class="col s8">Material Package {{materialRequest.name}} in Tender</h5>
   
   <div class="col s4" style="margin-top:15px">
       <a class='dropdown-button btn-flat right tooltipped' data-position="top" data-delay="1" data-tooltip="Attach..." data-gutter="-16" href='#'
          data-activates='itemActions' dropdown data-constrainwidth="false" data-beloworigin="true">
        <i class="mdi-navigation-more-vert"></i>
       </a>

       <!-- Dropdown Structure -->
       <ul id='itemActions' class='dropdown-content left'>
         <li><a class="modal-trigger" href="#modal_attachAddendum">Attach Addendum</a></li>
       <li><a class="modal-trigger" href="#modal_inviteSupplier">Invite Supplier</a></li>
       <li><div class="divider"></div></li>
       <li><a ng-click="cancelPackage()">Cancel Package</a></li>
       </ul>
   </div>
 </div>

 
 
 <div class="row">
   <div class="col s12">
     <ul class="collapsible" data-collapsible="accordion">
       <li>
         <div class="collapsible-header">Detail</div>
         <div class="collapsible-body" style="background-color: #FFF; padding:10px">
          <div class="col s12">
            <strong>Start date</strong>: {{materialRequest.dateStart | date: longDate}}
            <h6>Requirements:</h6>
            <table>
              <thead>
                <th>Description</th>
                <th>Quantity</th>
              </thead>
              <tbody>
                <tr ng-repeat="addendum in materialRequest.addendums | filter:{isHidden:false}">
                  <td>{{addendum.addendumsScope.description}}</td>
                  <td>{{addendum.addendumsScope.quantity}}</td>
                </tr>
              </tbody>
            </table>
          </div>
         </div>
       </li>
     </ul>
   </div>
 </div>

 <div class="row" ng-if="materialRequest.winnerTeam._id" style="display:none">
  <div class="col s12">
    <ul class="collapsible" data-collapsible="accordion">
      <li>
        <div class="collapsible-header">
          Team {{materialRequest.winnerTeam.name}} has won this package.
        </div>
        <div class="collapsible-body">
          <div class="row">
          <div class="col s5">
            <p>This is the detail area for the winner tender.</p>
            <p>
              Price <strong>{{materialRequest.quote}}</strong>
            </p>
            <p>{{materialRequest.description}}</p>
          </div>
          <div class="col s6">
             <ul class="collection">
               <div style="height: 300px; background-color: white; overflow-y:auto">

                 <li class="collection-item" ng-repeat = "message in messages.messages">
                   <div class="row valign-wrapper" style="margin-bottom: -5px">
                     <a class="btn-flat col s1">
                       <i class="mdi-toggle-radio-button-on valign center-align" ></i>
                     </a>

                     <p class="col s11 valign">{{message.message}}</p>
                   </div>
                 </li>
               </div>
               <div class="divider"></div>
               <div class="col s12 card-footer" style="background-color: white">
                 <div class="row">
                   <form class="valign-wrapper" ng-submit="sendMessage(toMaterial._id)">
                     <div class="input-field col s9">
                       <textarea id="textarea1" class="materialize-textarea" ng-model="message.message"></textarea>
                       <label for="textarea1">Textarea</label>
                     </div>
                     <div class="col s3">
                       <button class="btn-flat btn-flat valign" type="submit" name="action">
                         Send
                       </button>
                     </div>
                   </form>
                 </div>
               </div>
             </ul>
           </div>
        </div>
        </div>
      </li>
    </ul>
  </div>
</div>

 <div class="row" ng-if="!materialRequest.winnerTeam._id">
  
  <div class="col s12">
    <ul class="collapsible" data-collapsible="accordion">
      <li ng-repeat="toMaterial in materialRequest.to | filter: {isDecline:false}">
        <div class="collapsible-header">
          Tenderer #{{$index+1}} - {{toMaterial.email}}
          <a ng-if="toMaterial.quote._id" class="btn-flat btn-flat secondary-content modal-trigger" href='#modal_viewQuote_{{toMaterial.quote._id}}' style="font-size:12px; margin-top: 8px">View Quote</a>
        </div>
        <div class="collapsible-body" style="background-color: #FFF; padding:10px">
          <div class="row">
            <div class="col s12 m5">
              Detail for the tender #{{$index + 1}}.
              <div ng-repeat="file in files" ng-if="toMaterial._id == file.uploadBy">
                {{file.title}} - <a href='{{file.fileUrl}}' download="file.name">Download file</a>
              </div>
              <div ng-if="toMaterial.quote.total > 0" style="text-align:center">
                Total: {{toMaterial.quote.total}}
              </div>
              <div ng-if="toMaterial.quote._id">
                <a style="margin: 0px -15px;" class="btn-flat btn-flat modal-trigger" href="#modal_viewQuote_{{toMaterial.quote._id}}">View quote</a>
                <button style="margin: 0px -15px;" ng-click="selectQuote(toMaterial.quote._id)" class="btn-flat btn-flat valign">Select quote</button>
                <button style="margin: 0px -15px;" ng-click="declineQuote(toMaterial._id)" class="btn-flat btn-flat valign">Decline quote</button>
              </div>
            </div>
            <div class="col s12 m6">
             <ul class="collection">
               <div style="height: 300px; background-color: white; overflow-y:auto">
                 <li class="collection-item" ng-repeat = "message in messages.messages" ng-if="message.to == toMaterial._id">
                   <div class="row valign-wrapper" style="margin-bottom: -5px" >
                     <a class="btn-flat col s1">
                       <i class="mdi-toggle-radio-button-on valign center-align" ></i>
                     </a>
                     <p class="col s7 valign">{{message.message}}</p>
                     <p class="circle col s4 right valign center-align"><strong>Sent by</strong>: {{message.sendBy.name}}</p>
                   </div>
                 </li>
               </div>
               <div class="divider"></div>
               <div class="col s12 card-footer" style="background-color: white">
                 <div class="row">
                   <form class="valign-wrapper" ng-submit="sendMessage(toMaterial._id)">
                     <div class="input-field col s7 m9">
                       <textarea id="textarea1" class="materialize-textarea" ng-model="message.message"></textarea>
                       <label for="textarea1">Textarea</label>
                     </div>
                     <div class="col s3 m3">
                       <button class="btn-flat btn-flat valign" type="submit" name="action">
                         Send
                       </button>
                     </div>
                   </form>
                 </div>
               </div>
             </ul>
           </div>
          </div>
        </div>
      </li>
    </ul>
  </div>

 <!-- <div class="col s12">
  <ul class="collapsible popout" data-collapsible="accordion">
    <li ng-repeat="quoteRequest in quoteRequests">
      <div class="collapsible-header">
        Tenderer #{{$index + 1}} - {{quoteRequest.user.email}}
        <a class="btn-flat btn-flat secondary-content modal-trigger" href='#modal_viewQuote_{{quoteRequest._id}}' style="font-size:12px; margin-top: 8px">View Quote</a>
      </div>
      <div class="collapsible-body">
        <div class="row">
          <div class="col s5">
            <p>This is the detail area for the tender #{{$index + 1}}.</p>
            <p>{{quoteRequest.description}}</p>
          </div>
          <div class="col s6">
             <ul class="collection">
               <div style="height: 300px; background-color: white;">

                 <li class="collection-item">
                   <div class="row valign-wrapper" style="margin-bottom: -5px">
                     <a href="#!" class="btn-flat col s1">
                       <i class="mdi-toggle-radio-button-on valign center-align" ></i>
                     </a>

                     <p class="col s11 valign">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.<br /> Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim.</p>
                   </div>
                 </li>
                 <li class="collection-item">
                   <div class="row valign-wrapper" style="margin-bottom: -5px">
                     <a href="#!" class="btn-flat col s1">
                       <i class="mdi-toggle-radio-button-on valign center-align" ></i>
                     </a>

                     <p class="col s11 valign">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.<br /> Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim.</p>
                   </div>
                 </li>

               </div>
               <div class="divider"></div>
               <div class="col s12 card-footer" style="background-color: white">
                 <div class="row">
                   <form class="valign-wrapper">
                     <div class="input-field col s9">
                       <textarea id="textarea1" class="materialize-textarea"></textarea>
                       <label for="textarea1">Textarea</label>
                     </div>
                     <div class="col s3">
                       <button class="btn-flat btn-flat valign" type="submit" name="action">
                         Send
                       </button>
                     </div>
                   </form>
                 </div>
               </div>
             </ul>
           </div>
        </div>
      </div>

        
    </li>
  </ul>
 </div>
</div> -->

<addendum package="materialRequest" type="material"></addendum>

<!-- <div id="modal_attachAddendum" class="modal modal-fixed-footer">
    <div class="modal-content">
    <h5>Attach an Addenda to Package Name</h5>
    <form>
       
       <div class="row">
         <div class="col s12">
          <ul class="collection z-depth-1">
            <li class="collection-item vlalign-wrapper">
              <div class="row form" style="margin-bottom: 0px">
                <div class="col s12"><p>Edit your material list below:</p></div>
                <div class="input-field col s7">
                   <textarea id="description" class="materialize-textarea"></textarea>
                       <label for="description">Description</label>
                    </div>
                <div class="input-field col s3" style="margin-top: 67px">
                        <input id="quantity" type="text" class="validate">
                        <label for="quantity">Quantity</label>
                    </div>
                <div class="valign col s2">
                  <button class="btn" type="submit" name="action" style="margin-top: 78px">Add</button>
                </div>
              </div>
            </li>
              <li class="collection-item vlalign"><div class="row" style="margin-bottom: 0px"><div class="col s7"><p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s.</p></div><div class="col s3"><p>Quantity</p></div><div class="col s2"><button class="btn-flat btn-flat">Remove</button></div></div></li>
            <li class="collection-item vlalign"><div class="row" style="margin-bottom: 0px"><div class="col s7"><p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s.</p></div><div class="col s3"><p>Quantity</p></div><div class="col s2"><button class="btn-flat btn-flat">Remove</button></div></div></li>
            <li class="collection-item vlalign"><div class="row" style="margin-bottom: 0px"><div class="col s7"><p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s.</p></div><div class="col s3"><p>Quantity</p></div><div class="col s2"><button class="btn-flat btn-flat">Remove</button><button class="btn-flat btn-flat">Edit</button></div></div></li>
            <li class="collection-item vlalign"><div class="row" style="margin-bottom: 0px"><div class="col s7"><p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s.</p></div><div class="col s3"><p>Quantity</p></div><div class="col s2"><button class="btn-flat btn-flat">Remove</button><button class="btn-flat btn-flat">Edit</button></div></div></li>
            <li class="collection-item vlalign"><div class="row" style="margin-bottom: 0px"><div class="col s7"><p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s.</p></div><div class="col s3"><p>Quantity</p></div><div class="col s2"><button class="btn-flat btn-flat">Remove</button><button class="btn-flat btn-flat">Edit</button></div></div></li>
            </ul>
         </div>
       </div>
       
     </form>
    </div>
  <div class="divider"></div>
    <div class="modal-footer">
         <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">Send Addendum!</a>
     <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">Cancel</a>
    </div>
</div> -->

<div ng-repeat="quoteRequest in quoteRequests">
  <div id='modal_viewQuote_{{quoteRequest._id}}' class="modal modal-fixed-footer">
    <div class="modal-content">
      <h4>View Quote</h4>
      <div class="row" ng-show="quoteRequest.total > 0">
        <p>Total: <strong>{{quoteRequest.total}}</strong></p>
      </div>
      <div class="row">
        <table>
          <thead>
            <th>#</th>
            <th>Description</th>
            <th>Price</th>
            <th>Quantity</th>
            <th>Total</th>
          </thead>
          <tbody>
            <tr ng-repeat="rate in quoteRequest.quoteRate">
              <td>{{$index + 1}}</td>
              <td>{{rate.description}}</td>
              <td>{{rate.rate}}</td>
              <td>{{rate.quantity}}</td>
              <td>{{rate.total}}</td>
            </tr>
            <tr ng-repeat="price in quoteRequest.quotePrice">
              <td>{{$index + 1}}</td>
              <td>{{price.description}}</td>
              <td>{{price.rate}}</td>
              <td>1</td>
              <td>{{price.total}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="modal-footer">
      <a ng-click="selectQuote(quoteRequest._id)" class="modal-action modal-close waves-effect waves-green btn-flat ">Select this quote</a>
      <a class="modal-action modal-close waves-effect waves-green btn-flat " ng-click="declineQuote(quoteRequest.team)">Decline</a>
      <a class="modal-action modal-close waves-effect waves-green btn-flat ">Close</a>
    </div>
  </div>
</div> 

<div id="modal_inviteSupplier" class="modal modal-fixed-footer">
  <form ng-submit="sendInvitation()" name="form">
    <div class="modal-content">
    
       <div class="row">
         <div class="col s12">
           <h5>Invite More Suppliers to Package Name</h5>
         </div>
       </div>
       
       <div class="row">
         <div class="col s12">
          <ul class="collection z-depth-1">
            <li class="collection-item vlalign-wrapper">
              <div class="row form" style="margin-bottom: 0px">
                <div class="col s12"><p>Enter suppliers details below:</p></div>
                <div class="input-field col s12 m7">
                        <input id="email_address" type="text" class="validate" ng-model="toSupplier.newEmail">
                        <label for="email_address">Email</label>
                    </div>
                <div class="input-field col s6 m3">
                        <input id="phone_number" type="text" name="phoneNumber" class="validate" ng-model="toSupplier.newPhoneNumber">
                        <label for="phone_number">Phone Number</label>
                        <p class="validate-message" ng-if="form.phoneNumber.$valid == false">Please input number</p>
                    </div>
                <div class="valign col s6 m2">
                  <a ng-if="form.phoneNumber.$valid == true" ng-click="addUser()" class="btn" style="margin-top: 28px">Add</a>
                </div>
              </div>
            </li>
            <li class="collection-item vlalign" ng-repeat="emailPhone in emailsPhone">
              <div class="row" style="margin-bottom: 0px">
                <div class="col s12 m7">{{emailPhone.email}}</div>
                <div class="col s6 m3">{{emailPhone.phoneNumber}}</div>
                <div class="col s6 m2" style="float:right"><a class="btn-flat btn-flat" ng-click="removeUser($index)" >Remove</a></div>
              </div>
            </li>
          </ul>
         </div>
       </div>
       
     
    </div>
  <div class="divider"></div>
    <div class="modal-footer">
      <button type="submit" class="modal-action modal-close waves-effect waves-green btn-flat">Send Invitations</button>
         <!-- <a class="modal-action modal-close waves-effect waves-green btn-flat ">Send Invitations!</a> -->
     <a class="modal-action modal-close waves-effect waves-green btn-flat ">Cancel</a>
    </div>
    </form>
</div>
  
<div id="modal_cancelPackage" class="modal">
    <div class="modal-content">
   <div class="row">
     <div class="col s12">
       <h5>Confirm the Cancelation of Package Name</h5>
     </div>
   </div>
  <div class="divider"></div>
    <div class="modal-footer">
         <a class="modal-action modal-close waves-effect waves-green btn-flat ">Cancel This Package</a>
     <a class="modal-action modal-close waves-effect waves-green btn-flat ">Go Back</a>
    </div>
</div>
