<div class="row" style="margin-top: 18px">
   <h5 class="col s8">{{materialRequest.name}}</h5>
   
   <div class="col s4" style="margin-top:15px">
         <a class='dropdown-button btn-flat right tooltipped' data-position="top" data-delay="1"
            data-tooltip="Attach..." href='#' data-activates='itemActions'  dropdown data-beloworigin="true" data-constrainwidth="false">
            <i class="mdi-navigation-more-vert"></i>
         </a>

         <!-- Dropdown Structure -->
         <ul id='itemActions' class='dropdown-content'>
            <li>
              <a ng-show="currentTeam.type == 'builder'" class="modal-trigger" href="#modal_attachVariation">Attach Variation</a>
              <a ng-show="currentTeam.type == 'supplier'" class="modal-trigger" href="#attachVariationWithQuote">Attach Variation</a>
            </li>
           <li ng-if="currentTeam.type == 'buider'"><a class="modal-trigger" href="#modal_attachDefect">Attach Defect</a></li>
           <li ng-if="currentTeam.type == 'supplier'"><a class="modal-trigger" href="#attachInvoice">Attach Invoice</a></li>
           <li><a class="modal-trigger" href="#modal_attachDocument">Attach Document</a></li>
           <div class="divider"  ng-if="isLeader"></div>
           <li><a class="modal-trigger" ng-if="isLeader && currentTeam.type =='builder' && !materialRequest.isCompleted" href="#modal_complete">Mark as complete</a></li>
           <li><a class="modal-trigger" ng-if="isLeader && currentTeam.type =='builder' && materialRequest.isCompleted" href="#modal_complete">Mark as in progress</a></li>
         </ul>
   </div>
</div>

<div class="row">
  <div class="col s12">
    <ul class="collapsible" data-collapsible="accordion">
      <li>
        <div class="collapsible-header"><i class=""></i>Details</div>
        <div class="collapsible-body" style="background-color: #FFF; padding:10px">
          <table class="bordered centered">
            <thead>
            <tr>
              <th>#</th>
              <th>Materials list</th>
              <th>Quantity</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="requirement in materialRequest.requirements">
              <td>{{$index + 1}}</td>
              <td>{{requirement.description}}</td>
              <td>{{requirement.quantity}}</td>
            </tr>
            </tbody>
          </table>
        </div>
      </li>
    </ul>
  </div>
</div>


<div class="row">
  <div task package="materialRequest" type="material"></div>
  <addOn package="materialRequest" type="material"></addOn>
</div>

<div class="row">
  <div message package="materialRequest" type="material"></div>
</div>

<div ng-include="'js/modules/material-request/material-package-in-process/complete.modal.html'"></div>



<!-- <div id="modal_attachDefect" class="modal modal-fixed-footer">
    <div class="modal-content">
        <form method="POST">
             <div class="row">
                 <div class="col s12">
                     <h5>New Defect for Contractor Package {{materialRequest.name}}</h5>
                 </div>
             </div>
             <div class="row valign-wrapper">
                 <div class="input-field col s6">
                     <input id="defect_title" type="text" class="validate valign" ng-model="defect.title">
                     <label for="defect_title">Defect Title</label>
                 </div>
                 <div class="input-field col s6">
                     <input id="defect_location" type="text" class="validate valign" ng-model="defect.location">
                     <label for="defect_location">Location of the Defect</label>
                 </div>
             </div>
             <div class="row">
                 <div class="input-field col s12">
                    <textarea id="defect_description" class="materialize-textarea" ng-model="defect.description"></textarea>
                    <label for="defect_description">Description of Defect</label>
                 </div>
             </div>
         </form>
    </div>
    <div class="modal-footer">
         <a href="#!" ng-click="sendDefect()" class="modal-action modal-close waves-effect waves-green btn-flat ">Send Defect!</a>
         <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">Cancel</a>
    </div>
</div>

<div id="attachInvoice" class="modal modal-fixed-footer">
    <div class="modal-content">
    <form method="POST">
       <div class="row">
         <div class="col s12">
           <h5>New Invoice for Builder Package {{materialRequest.name}}</h5>
         </div>
       </div>
       <div class="row">
         <div class="input-field col s12">
                 <input id="project_name" type="text" class="validate" ng-model="invoice.title">
                 <label for="project_name">Invoice Title</label>
             </div>
       </div>
       <div class="row">
         <div class="col s12">
          <ul class="collection z-depth-1">
            <li class="collection-item vlalign-wrapper">
              <div class="row" style="margin-bottom: 0px">
                <div class="col s6 valign center-align background-hover">
                  <a ng-click="addLineWithRate()" class="waves-effect waves-light btn-flat">Add Line with Rate</a>
                </div>
                <div class="col s6 valign center-align background-hover">
                  <a ng-click="addLineWithPrice()" class="waves-effect waves-light btn-flat">Add Line with Price</a>
                </div>
              </div>
            </li>
            <li class="collection-item vlalign-wrapper">
              <div class="row form" style="margin-bottom: 0px" ng-repeat="lineWithRate in lineWithRates track by $index">
                <div class="input-field col s6">
                   <textarea value="This is a line item with Rate - note the field for qty is editable"id="description" class="materialize-textarea" ng-model="rate.lineWithRate.rateDescription[$index]" required></textarea>
                       <label for="description">Description of Item</label>
                    </div>
                <div class="input-field col s2" style="margin-top: 67px">
                        <input id="rate" type="text" class="validate" ng-model="rate.lineWithRate.rate[$index]" required>
                        <label for="rate">Rate</label>
                    </div>
                <div class="input-field col s1" style="margin-top: 67px">
                        <input id="quantity" type="text" class="validate" ng-model="rate.lineWithRate.rateQuantity[$index]" required>
                        <label for="quantity">Qty</label>
                    </div>
                <div class="input-field col s2" style="margin-top: 67px">
                        <input disabled id="quantity" type="text" class="validate" ng-model="rate.lineWithRate.rateTotal[$index]">
                        <label for="quantity">Line Total {{rate.lineWithRate.rate[$index] * rate.lineWithRate.rateQuantity[$index]}}</label>
                    </div>
                <div class="input-field col s1" style="margin-top: 67px">
                        <i class="small mdi-action-highlight-remove" ng-click="removeLineWithRate($index)"></i>
                    </div>
              </div>
            </li>
            <li class="collection-item vlalign-wrapper">
              <div class="row form" style="margin-bottom: 0px" ng-repeat="lineWithPrice in lineWithPrices track by $index">
                <div class="input-field col s6">
                   <textarea value="This is a line item with Price - the Qty field is set to 1 and only price can be changed."id="description" class="materialize-textarea" ng-model="price.lineWithPrice.description[$index]" required></textarea>
                       <label for="description">Description of Item</label>
                    </div>
                <div class="input-field col s2" style="margin-top: 67px">
                        <input id="rate" type="text" class="validate" ng-model="price.lineWithPrice.price[$index]" required>
                        <label for="rate">Price</label>
                    </div>
                <div class="input-field col s1" style="margin-top: 67px">
                        <input disabled value="1" id="quantity" type="text" class="validate" ng-model="price.lineWithPrice.quantity[$index]">
                        <label for="quantity">1</label>
                    </div>
                <div class="input-field col s2" style="margin-top: 67px">
                        <input disabled id="quantity" type="text" class="validate" ng-model="price.lineWithPrice.total[$index]">
                        <label for="quantity">Line Total {{price.lineWithPrice.price[$index]}}</label>
                    </div>
                <div class="input-field col s1" style="margin-top: 67px">
                        <i class="small mdi-action-highlight-remove" ng-click="removeLineWithPrice($index)"></i>
                    </div>
              </div>
            </li>
            </ul>
         </div>
       </div>
       <div class="row" style="margin-top: 50px">
         <div class="col s6 valign">
           <div class="file-field input-field">
               <!-- <input class="file-path validate" type="text"/> -->
               <!-- <div ng-show="uploader.queue.length" class="form-group">
                <div ng-repeat="item in uploader.queue">
                  <div class="row">
                    <div class="input-field col s8 offset-s2">
                      <input type="text" ng-model="item.file.name">
                      <label for="">File name</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="input-field col s8 offset-s2">
                    </div>
                  </div>
                </div>
              </div>
               <div class="btn tooltipped" data-position="top" data-delay="1" data-tooltip="Attach a File"><i class="mdi-editor-attach-file"></i>
                 <input type="file" nv-file-select="" uploader="uploader" />
               </div>
             </div>
         </div>
         <div class="input-field col s2 offset-s3" style="margin-top: -40px">
                <p>Sub-Total</p>
            <p>GST</p>
            <p>Total</p>
             </div>
       </div>
       
     </form>
    </div>
  <div class="divider"></div>
    <div class="modal-footer">
     <a href="#!" ng-click="sendInvoice();uploadAll();" class="modal-action modal-close waves-effect waves-green btn-flat ">Send Invoice!</a>
     <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">Cancel</a>
    </div>
</div> --> 
